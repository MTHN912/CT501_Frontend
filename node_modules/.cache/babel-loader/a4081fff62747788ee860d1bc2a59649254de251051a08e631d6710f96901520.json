{"ast":null,"code":"import axios from \"axios\";\nexport default {\n  name: \"Navbar\",\n  data() {\n    return {\n      cart: {\n        items: []\n      }\n    };\n  },\n  computed: {\n    // Tính tổng số lượng món trong giỏ hàng\n    cartTotalQuantity() {\n      return this.cart.items.reduce((total, item) => total + item.quantity, 0);\n    },\n    // Kiểm tra trạng thái đăng nhập\n    isLoggedIn() {\n      return this.$store.getters.isLoggedIn;\n    },\n    // Kiểm tra quyền admin của người dùng\n    isAdmin() {\n      const userInfo = this.$store.getters.userInfo;\n      return userInfo?.ROLE?.IS_ADMIN;\n    },\n    cartTotalQuantity() {\n      // Tính tổng số lượng sản phẩm trong giỏ từ Vuex store\n      return this.$store.state.cart.items.reduce((total, item) => total + item.quantity, 0);\n    },\n    cart() {\n      return this.$store.state.cart;\n    }\n  },\n  methods: {\n    // Lấy dữ liệu giỏ hàng từ server\n    async fetchCart() {\n      try {\n        const response = await axios.get(\"http://localhost:3000/cart/getCart\");\n        this.cart = response.data.cart;\n      } catch (error) {\n        console.error(\"Lỗi khi tải giỏ hàng:\", error);\n      }\n    },\n    async logout() {\n      try {\n        await this.$store.dispatch(\"logout\");\n        // Điều hướng đến trang đăng nhập sau khi đăng xuất thành công\n        this.$router.push(\"/login\");\n      } catch (error) {\n        console.error(\"Lỗi khi đăng xuất:\", error);\n      }\n    }\n  },\n  mounted() {\n    // Tải giỏ hàng khi component được mount\n    this.fetchCart();\n\n    // Tự động cập nhật giỏ hàng khi Vuex Store thay đổi\n    this.$store.watch(state => state.cart,\n    // Theo dõi sự thay đổi của giỏ hàng trong store\n    newCart => {\n      this.cart = newCart; // Cập nhật giỏ hàng trong component\n    });\n  }\n};","map":{"version":3,"names":["axios","name","data","cart","items","computed","cartTotalQuantity","reduce","total","item","quantity","isLoggedIn","$store","getters","isAdmin","userInfo","ROLE","IS_ADMIN","state","methods","fetchCart","response","get","error","console","logout","dispatch","$router","push","mounted","watch","newCart"],"sources":["D:\\Tiểu Luận Tốt Nghiệp\\Frontend\\src\\components\\Layout\\Navbar.vue"],"sourcesContent":["<template>\n  <div class=\"container-fluid nav-bar fixed-top\">\n    <div class=\"container\">\n      <nav class=\"navbar navbar-light navbar-expand-lg py-4\">\n        <router-link to=\"/\" class=\"navbar-brand\">\n          <h1 class=\"text-primary fw-bold mb-0\">\n            MTHN<span class=\"text-dark\">Restaurant</span>\n          </h1>\n        </router-link>\n        <button\n          class=\"navbar-toggler py-2 px-3\"\n          type=\"button\"\n          data-bs-toggle=\"collapse\"\n          data-bs-target=\"#navbarCollapse\"\n        >\n          <span class=\"fa fa-bars text-primary\"></span>\n        </button>\n        <div class=\"collapse navbar-collapse\" id=\"navbarCollapse\">\n          <div class=\"navbar-nav mx-auto\">\n            <router-link\n              to=\"/\"\n              class=\"nav-item nav-link\"\n              exact-active-class=\"active\"\n              exact\n              >Trang Chủ</router-link\n            >\n            <router-link\n              to=\"/about\"\n              class=\"nav-item nav-link\"\n              active-class=\"active\"\n              >Giới Thiệu</router-link\n            >\n            <router-link\n              to=\"/services\"\n              class=\"nav-item nav-link\"\n              active-class=\"active\"\n              >Khuyến Mãi</router-link\n            >\n            <router-link\n              to=\"/events\"\n              class=\"nav-item nav-link\"\n              active-class=\"active\"\n              >Gói Tiệc</router-link\n            >\n            <router-link\n              to=\"/menu\"\n              class=\"nav-item nav-link\"\n              active-class=\"active\"\n              >Món Ăn</router-link\n            >\n            <div class=\"nav-item dropdown\">\n              <a\n                href=\"#\"\n                class=\"nav-link dropdown-toggle\"\n                data-bs-toggle=\"dropdown\"\n                >Sự Kiện</a\n              >\n              <div class=\"dropdown-menu bg-light\">\n                <router-link\n                  to=\"/book\"\n                  class=\"dropdown-item\"\n                  active-class=\"active\"\n                  >Tiệc Cưới</router-link\n                >\n                <router-link\n                  to=\"/blog\"\n                  class=\"dropdown-item\"\n                  active-class=\"active\"\n                  >Sinh Nhật</router-link\n                >\n                <router-link\n                  to=\"/team\"\n                  class=\"dropdown-item\"\n                  active-class=\"active\"\n                  >ABC</router-link\n                >\n                <router-link\n                  to=\"/testimonial\"\n                  class=\"dropdown-item\"\n                  active-class=\"active\"\n                  >ABC2</router-link\n                >\n                <router-link\n                  to=\"/404\"\n                  class=\"dropdown-item\"\n                  active-class=\"active\"\n                  >404 Page</router-link\n                >\n              </div>\n            </div>\n            <router-link\n              to=\"/contact\"\n              class=\"nav-item nav-link\"\n              active-class=\"active\"\n              >Liên Hệ</router-link\n            >\n          </div>\n\n          <!-- Phần giỏ hàng luôn hiển thị -->\n          <div class=\"cart-summary\">\n            <router-link to=\"/cart\" class=\"nav-link cart-icon\">\n              <i class=\"fas fa-shopping-cart\"></i>\n              <span class=\"badge bg-primary\">{{ cartTotalQuantity }}</span>\n            </router-link>\n          </div>\n\n          <!-- Nút tìm kiếm -->\n          <button\n            class=\"btn-search btn btn-primary btn-md-square me-4 rounded-circle d-none d-lg-inline-flex\"\n            data-bs-toggle=\"modal\"\n            data-bs-target=\"#searchModal\"\n          >\n            <i class=\"fas fa-search\"></i>\n          </button>\n\n          <!-- Dropdown cho tài khoản người dùng -->\n          <div class=\"dropdown\">\n            <button\n              class=\"btn btn-sm btn-outline-primary dropdown-toggle\"\n              type=\"button\"\n              data-bs-toggle=\"dropdown\"\n              aria-expanded=\"false\"\n            >\n              <i class=\"fas fa-user\"></i>\n            </button>\n\n            <ul class=\"dropdown-menu dropdown-menu-end\">\n              <li v-if=\"isLoggedIn && isAdmin\">\n                <router-link\n                  to=\"/admin\"\n                  class=\"dropdown-item\"\n                  active-class=\"active\"\n                >\n                  Trang Quản Lý\n                </router-link>\n              </li>\n              <li v-if=\"isLoggedIn\">\n                <!-- Thêm mục xem thông tin cá nhân -->\n                <router-link\n                  to=\"/profile\"\n                  class=\"dropdown-item\"\n                  active-class=\"active\"\n                >\n                  Thông Tin Cá Nhân\n                </router-link>\n              </li>\n              <li v-if=\"isLoggedIn\">\n                <button\n                  @click=\"logout\"\n                  class=\"dropdown-item\"\n                  active-class=\"active\"\n                >\n                  Đăng Xuất\n                </button>\n              </li>\n              <li v-else>\n                <router-link\n                  to=\"/login\"\n                  class=\"dropdown-item\"\n                  active-class=\"active\"\n                >\n                  Đăng Nhập</router-link\n                >\n              </li>\n              <li v-if=\"!isLoggedIn\">\n                <router-link\n                  to=\"/register\"\n                  class=\"dropdown-item\"\n                  active-class=\"active\"\n                >\n                  Đăng Ký</router-link\n                >\n              </li>\n            </ul>\n          </div>\n        </div>\n      </nav>\n    </div>\n  </div>\n</template>\n\n<script>\nimport axios from \"axios\";\n\nexport default {\n  name: \"Navbar\",\n  data() {\n    return {\n      cart: { items: [] },\n    };\n  },\n  computed: {\n    // Tính tổng số lượng món trong giỏ hàng\n    cartTotalQuantity() {\n      return this.cart.items.reduce((total, item) => total + item.quantity, 0);\n    },\n    // Kiểm tra trạng thái đăng nhập\n    isLoggedIn() {\n      return this.$store.getters.isLoggedIn;\n    },\n    // Kiểm tra quyền admin của người dùng\n    isAdmin() {\n      const userInfo = this.$store.getters.userInfo;\n      return userInfo?.ROLE?.IS_ADMIN;\n    },\n    cartTotalQuantity() {\n      // Tính tổng số lượng sản phẩm trong giỏ từ Vuex store\n      return this.$store.state.cart.items.reduce(\n        (total, item) => total + item.quantity,\n        0\n      );\n    },\n    cart() {\n      return this.$store.state.cart;\n    },\n  },\n  methods: {\n    // Lấy dữ liệu giỏ hàng từ server\n    async fetchCart() {\n      try {\n        const response = await axios.get(\"http://localhost:3000/cart/getCart\");\n        this.cart = response.data.cart;\n      } catch (error) {\n        console.error(\"Lỗi khi tải giỏ hàng:\", error);\n      }\n    },\n    async logout() {\n      try {\n        await this.$store.dispatch(\"logout\");\n        // Điều hướng đến trang đăng nhập sau khi đăng xuất thành công\n        this.$router.push(\"/login\");\n      } catch (error) {\n        console.error(\"Lỗi khi đăng xuất:\", error);\n      }\n    },\n  },\n\n  mounted() {\n    // Tải giỏ hàng khi component được mount\n    this.fetchCart();\n\n    // Tự động cập nhật giỏ hàng khi Vuex Store thay đổi\n    this.$store.watch(\n      (state) => state.cart, // Theo dõi sự thay đổi của giỏ hàng trong store\n      (newCart) => {\n        this.cart = newCart; // Cập nhật giỏ hàng trong component\n      }\n    );\n  },\n};\n</script>\n\n<style scoped>\n.cart-summary {\n  position: relative;\n}\n\n.cart-icon {\n  position: relative;\n  font-size: 1.5rem;\n  color: #333;\n  cursor: pointer;\n}\n\n.cart-icon .badge {\n  position: absolute;\n  top: -10px;\n  right: -10px;\n  background-color: #ff6600;\n  color: white;\n}\n.fixed-top {\n    position: fixed;\n    top: 0;\n    right: 0;\n    left: 0;\n    z-index: 1000;\n}\n</style>\n"],"mappings":"AAsLA,OAAOA,KAAI,MAAO,OAAO;AAEzB,eAAe;EACbC,IAAI,EAAE,QAAQ;EACdC,IAAIA,CAAA,EAAG;IACL,OAAO;MACLC,IAAI,EAAE;QAAEC,KAAK,EAAE;MAAG;IACpB,CAAC;EACH,CAAC;EACDC,QAAQ,EAAE;IACR;IACAC,iBAAiBA,CAAA,EAAG;MAClB,OAAO,IAAI,CAACH,IAAI,CAACC,KAAK,CAACG,MAAM,CAAC,CAACC,KAAK,EAAEC,IAAI,KAAKD,KAAI,GAAIC,IAAI,CAACC,QAAQ,EAAE,CAAC,CAAC;IAC1E,CAAC;IACD;IACAC,UAAUA,CAAA,EAAG;MACX,OAAO,IAAI,CAACC,MAAM,CAACC,OAAO,CAACF,UAAU;IACvC,CAAC;IACD;IACAG,OAAOA,CAAA,EAAG;MACR,MAAMC,QAAO,GAAI,IAAI,CAACH,MAAM,CAACC,OAAO,CAACE,QAAQ;MAC7C,OAAOA,QAAQ,EAAEC,IAAI,EAAEC,QAAQ;IACjC,CAAC;IACDX,iBAAiBA,CAAA,EAAG;MAClB;MACA,OAAO,IAAI,CAACM,MAAM,CAACM,KAAK,CAACf,IAAI,CAACC,KAAK,CAACG,MAAM,CACxC,CAACC,KAAK,EAAEC,IAAI,KAAKD,KAAI,GAAIC,IAAI,CAACC,QAAQ,EACtC,CACF,CAAC;IACH,CAAC;IACDP,IAAIA,CAAA,EAAG;MACL,OAAO,IAAI,CAACS,MAAM,CAACM,KAAK,CAACf,IAAI;IAC/B;EACF,CAAC;EACDgB,OAAO,EAAE;IACP;IACA,MAAMC,SAASA,CAAA,EAAG;MAChB,IAAI;QACF,MAAMC,QAAO,GAAI,MAAMrB,KAAK,CAACsB,GAAG,CAAC,oCAAoC,CAAC;QACtE,IAAI,CAACnB,IAAG,GAAIkB,QAAQ,CAACnB,IAAI,CAACC,IAAI;MAChC,EAAE,OAAOoB,KAAK,EAAE;QACdC,OAAO,CAACD,KAAK,CAAC,uBAAuB,EAAEA,KAAK,CAAC;MAC/C;IACF,CAAC;IACD,MAAME,MAAMA,CAAA,EAAG;MACb,IAAI;QACF,MAAM,IAAI,CAACb,MAAM,CAACc,QAAQ,CAAC,QAAQ,CAAC;QACpC;QACA,IAAI,CAACC,OAAO,CAACC,IAAI,CAAC,QAAQ,CAAC;MAC7B,EAAE,OAAOL,KAAK,EAAE;QACdC,OAAO,CAACD,KAAK,CAAC,oBAAoB,EAAEA,KAAK,CAAC;MAC5C;IACF;EACF,CAAC;EAEDM,OAAOA,CAAA,EAAG;IACR;IACA,IAAI,CAACT,SAAS,CAAC,CAAC;;IAEhB;IACA,IAAI,CAACR,MAAM,CAACkB,KAAK,CACdZ,KAAK,IAAKA,KAAK,CAACf,IAAI;IAAE;IACtB4B,OAAO,IAAK;MACX,IAAI,CAAC5B,IAAG,GAAI4B,OAAO,EAAE;IACvB,CACF,CAAC;EACH;AACF,CAAC","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}