{"ast":null,"code":"import { createCommentVNode as _createCommentVNode, createElementVNode as _createElementVNode, toDisplayString as _toDisplayString, renderList as _renderList, Fragment as _Fragment, openBlock as _openBlock, createElementBlock as _createElementBlock, normalizeClass as _normalizeClass } from \"vue\";\nconst _hoisted_1 = {\n  class: \"review-container\"\n};\nconst _hoisted_2 = {\n  class: \"review-summary\"\n};\nconst _hoisted_3 = {\n  class: \"rating-overview\"\n};\nconst _hoisted_4 = {\n  class: \"average-rating\"\n};\nconst _hoisted_5 = {\n  class: \"stars\"\n};\nconst _hoisted_6 = {\n  class: \"tabs\"\n};\nconst _hoisted_7 = {\n  key: 0,\n  class: \"reviews\"\n};\nconst _hoisted_8 = {\n  class: \"review-header\"\n};\nconst _hoisted_9 = {\n  class: \"review-rating\"\n};\nconst _hoisted_10 = {\n  class: \"review-date\"\n};\nconst _hoisted_11 = {\n  key: 0,\n  class: \"review-images\"\n};\nconst _hoisted_12 = [\"src\"];\nconst _hoisted_13 = {\n  key: 1\n};\nexport function render(_ctx, _cache, $props, $setup, $data, $options) {\n  return _openBlock(), _createElementBlock(\"div\", _hoisted_1, [_createCommentVNode(\" Tổng quan đánh giá \"), _createElementVNode(\"div\", _hoisted_2, [_cache[6] || (_cache[6] = _createElementVNode(\"h2\", null, \"Đánh giá sản phẩm\", -1 /* HOISTED */)), _createElementVNode(\"div\", _hoisted_3, [_createElementVNode(\"div\", _hoisted_4, [_createElementVNode(\"h2\", null, _toDisplayString($data.averageRating) + \" trên 5\", 1 /* TEXT */), _createElementVNode(\"div\", _hoisted_5, [(_openBlock(), _createElementBlock(_Fragment, null, _renderList(5, n => {\n    return _createElementVNode(\"span\", {\n      key: n,\n      class: _normalizeClass([\"star\", {\n        filled: n <= $data.averageRating\n      }])\n    }, \"★\", 2 /* CLASS */);\n  }), 64 /* STABLE_FRAGMENT */))]), _createElementVNode(\"p\", null, \"(\" + _toDisplayString($data.totalReviews) + \" đánh giá)\", 1 /* TEXT */)])])]), _createCommentVNode(\" Tab chọn số sao \"), _createElementVNode(\"div\", _hoisted_6, [_createElementVNode(\"button\", {\n    class: _normalizeClass({\n      active: $data.selectedTab === 'all'\n    }),\n    onClick: _cache[0] || (_cache[0] = $event => $data.selectedTab = 'all')\n  }, \" Tất cả \", 2 /* CLASS */), _createElementVNode(\"button\", {\n    class: _normalizeClass({\n      active: $data.selectedTab === 5\n    }),\n    onClick: _cache[1] || (_cache[1] = $event => $data.selectedTab = 5)\n  }, \" 5 Sao \", 2 /* CLASS */), _createElementVNode(\"button\", {\n    class: _normalizeClass({\n      active: $data.selectedTab === 4\n    }),\n    onClick: _cache[2] || (_cache[2] = $event => $data.selectedTab = 4)\n  }, \" 4 Sao \", 2 /* CLASS */), _createElementVNode(\"button\", {\n    class: _normalizeClass({\n      active: $data.selectedTab === 3\n    }),\n    onClick: _cache[3] || (_cache[3] = $event => $data.selectedTab = 3)\n  }, \" 3 Sao \", 2 /* CLASS */), _createElementVNode(\"button\", {\n    class: _normalizeClass({\n      active: $data.selectedTab === 2\n    }),\n    onClick: _cache[4] || (_cache[4] = $event => $data.selectedTab = 2)\n  }, \" 2 Sao \", 2 /* CLASS */), _createElementVNode(\"button\", {\n    class: _normalizeClass({\n      active: $data.selectedTab === 1\n    }),\n    onClick: _cache[5] || (_cache[5] = $event => $data.selectedTab = 1)\n  }, \" 1 Sao \", 2 /* CLASS */)]), _createCommentVNode(\" Danh sách đánh giá \"), $options.filteredReviews.length > 0 ? (_openBlock(), _createElementBlock(\"div\", _hoisted_7, [(_openBlock(true), _createElementBlock(_Fragment, null, _renderList($options.filteredReviews, review => {\n    return _openBlock(), _createElementBlock(\"div\", {\n      key: review.id,\n      class: \"review-item\"\n    }, [_createElementVNode(\"div\", _hoisted_8, [_createElementVNode(\"h4\", null, _toDisplayString(review.username), 1 /* TEXT */), _createElementVNode(\"div\", _hoisted_9, [(_openBlock(), _createElementBlock(_Fragment, null, _renderList(5, n => {\n      return _createElementVNode(\"span\", {\n        key: n,\n        class: _normalizeClass([\"star\", {\n          filled: n <= review.rating\n        }])\n      }, \"★\", 2 /* CLASS */);\n    }), 64 /* STABLE_FRAGMENT */))]), _createElementVNode(\"p\", _hoisted_10, _toDisplayString(review.date), 1 /* TEXT */)]), _createElementVNode(\"p\", null, _toDisplayString(review.comment), 1 /* TEXT */), _createCommentVNode(\" Hình ảnh review \"), review.images && review.images.length > 0 ? (_openBlock(), _createElementBlock(\"div\", _hoisted_11, [(_openBlock(true), _createElementBlock(_Fragment, null, _renderList(review.images, image => {\n      return _openBlock(), _createElementBlock(\"img\", {\n        src: image,\n        alt: 'Review image',\n        class: \"review-image\"\n      }, null, 8 /* PROPS */, _hoisted_12);\n    }), 256 /* UNKEYED_FRAGMENT */))])) : _createCommentVNode(\"v-if\", true)]);\n  }), 128 /* KEYED_FRAGMENT */))])) : (_openBlock(), _createElementBlock(\"p\", _hoisted_13, \"Không có đánh giá nào cho tab này.\"))]);\n}","map":{"version":3,"names":["class","key","_createElementBlock","_hoisted_1","_createCommentVNode","_createElementVNode","_hoisted_2","_hoisted_3","_hoisted_4","_toDisplayString","$data","averageRating","_hoisted_5","_Fragment","_renderList","n","_normalizeClass","filled","totalReviews","_hoisted_6","active","selectedTab","onClick","_cache","$event","$options","filteredReviews","length","_hoisted_7","review","id","_hoisted_8","username","_hoisted_9","rating","_hoisted_10","date","comment","images","_hoisted_11","image","src","alt","_hoisted_12","_hoisted_13"],"sources":["D:\\Tiểu Luận Tốt Nghiệp\\Frontend\\src\\components\\Menu\\ReviewSection.vue"],"sourcesContent":["<template>\n  <div class=\"review-container\">\n    <!-- Tổng quan đánh giá -->\n    <div class=\"review-summary\">\n      <h2>Đánh giá sản phẩm</h2>\n      <div class=\"rating-overview\">\n        <div class=\"average-rating\">\n          <h2>{{ averageRating }} trên 5</h2>\n          <div class=\"stars\">\n            <span\n              v-for=\"n in 5\"\n              :key=\"n\"\n              class=\"star\"\n              :class=\"{ filled: n <= averageRating }\"\n              >★</span\n            >\n          </div>\n          <p>({{ totalReviews }} đánh giá)</p>\n        </div>\n      </div>\n    </div>\n\n    <!-- Tab chọn số sao -->\n    <div class=\"tabs\">\n      <button\n        :class=\"{ active: selectedTab === 'all' }\"\n        @click=\"selectedTab = 'all'\"\n      >\n        Tất cả\n      </button>\n      <button :class=\"{ active: selectedTab === 5 }\" @click=\"selectedTab = 5\">\n        5 Sao\n      </button>\n      <button :class=\"{ active: selectedTab === 4 }\" @click=\"selectedTab = 4\">\n        4 Sao\n      </button>\n      <button :class=\"{ active: selectedTab === 3 }\" @click=\"selectedTab = 3\">\n        3 Sao\n      </button>\n      <button :class=\"{ active: selectedTab === 2 }\" @click=\"selectedTab = 2\">\n        2 Sao\n      </button>\n      <button :class=\"{ active: selectedTab === 1 }\" @click=\"selectedTab = 1\">\n        1 Sao\n      </button>\n    </div>\n\n    <!-- Danh sách đánh giá -->\n    <div v-if=\"filteredReviews.length > 0\" class=\"reviews\">\n      <div\n        v-for=\"review in filteredReviews\"\n        :key=\"review.id\"\n        class=\"review-item\"\n      >\n        <div class=\"review-header\">\n          <h4>{{ review.username }}</h4>\n          <div class=\"review-rating\">\n            <span\n              v-for=\"n in 5\"\n              :key=\"n\"\n              class=\"star\"\n              :class=\"{ filled: n <= review.rating }\"\n              >★</span\n            >\n          </div>\n          <p class=\"review-date\">{{ review.date }}</p>\n        </div>\n        <p>{{ review.comment }}</p>\n\n        <!-- Hình ảnh review -->\n        <div\n          v-if=\"review.images && review.images.length > 0\"\n          class=\"review-images\"\n        >\n          <img\n            v-for=\"image in review.images\"\n            :src=\"image\"\n            :alt=\"'Review image'\"\n            class=\"review-image\"\n          />\n        </div>\n      </div>\n    </div>\n    <p v-else>Không có đánh giá nào cho tab này.</p>\n  </div>\n</template>\n\n<script>\nimport axios from \"axios\";\n\nexport default {\n  data() {\n    return {\n      averageRating: 0,\n      totalReviews: 0,\n      reviews: [],\n      selectedTab: \"all\", // Mặc định là tab tất cả\n    };\n  },\n  computed: {\n    // Lọc đánh giá dựa trên tab được chọn\n    filteredReviews() {\n      if (this.selectedTab === \"all\") {\n        return this.reviews;\n      }\n      return this.reviews.filter(\n        (review) => review.rating === this.selectedTab\n      );\n    },\n  },\n  methods: {\n    // Phương thức lấy điểm đánh giá trung bình và tổng số đánh giá từ API\n    async fetchAverageRating(dishId) {\n      try {\n        const response = await axios.get(\n          `http://localhost:3000/review/getAverageRating/${dishId}`\n        );\n        this.averageRating = response.data.average;\n        this.totalReviews = response.data.totalReviews;\n      } catch (error) {\n        console.error(\"Lỗi khi lấy điểm đánh giá trung bình:\", error);\n      }\n    },\n\n    // Phương thức lấy danh sách đánh giá từ API, có thể lọc theo số sao\n    async fetchReviews(dishId) {\n      try {\n        const ratingFilter =\n          this.selectedTab === \"all\" ? \"\" : `?rating=${this.selectedTab}`;\n        const response = await axios.get(\n          `http://localhost:3000/review/getReviews/${dishId}${ratingFilter}`\n        );\n        this.reviews = response.data;\n      } catch (error) {\n        console.error(\"Lỗi khi lấy danh sách đánh giá:\", error);\n      }\n    },\n  },\n  watch: {\n    // Theo dõi thay đổi của tab và gọi lại API khi tab thay đổi\n    selectedTab() {\n      const dishId = this.$route.params.dishId;\n      this.fetchReviews(dishId);\n    },\n  },\n  mounted() {\n    const dishId = this.$route.params.id;\n    // Gọi API để lấy dữ liệu đánh giá khi component được mount\n    this.fetchAverageRating(dishId);\n    this.fetchReviews(dishId);\n  },\n};\n</script>\n\n<style scoped>\n.review-container {\n  max-width: 1300px;\n  margin: 0 auto;\n  padding: 20px;\n  background-color: white;\n  box-shadow: 0 4px 10px rgba(0, 0, 0, 0.1);\n  border-radius: 8px;\n}\n.review-summary {\n  text-align: center;\n  margin-bottom: 20px;\n}\n.average-rating h2 {\n  font-size: 2rem;\n  font-weight: bold;\n}\n.stars {\n  display: flex;\n  justify-content: center;\n  margin: 10px 0;\n}\n.star {\n  font-size: 1.5rem;\n  color: #ddd;\n  margin-right: 5px;\n}\n.star.filled {\n  color: gold;\n}\n.tabs {\n  display: flex;\n  justify-content: center;\n  margin-bottom: 20px;\n}\n.tabs button {\n  padding: 10px 20px;\n  border: none;\n  background-color: #f1f1f1;\n  cursor: pointer;\n  margin-right: 5px;\n  transition: background-color 0.3s;\n}\n.tabs button.active,\n.tabs button:hover {\n  background-color: #ff6600;\n  color: white;\n}\n.reviews {\n  display: flex;\n  flex-direction: column;\n}\n.review-item {\n  display: flex;\n  flex-direction: column;\n  padding: 15px 0;\n  border-bottom: 1px solid #eee;\n  gap: 10px;\n}\n.review-header {\n  display: flex;\n  justify-content: space-between;\n  align-items: center;\n  width: 100%;\n}\n.review-header h4 {\n  font-size: 1.2rem;\n  margin: 0;\n  flex: 1;\n}\n.review-rating {\n  display: flex;\n  justify-content: flex-start;\n  flex: 1;\n  gap: 3px;\n}\n.review-date {\n  color: #aaa;\n  font-size: 0.9rem;\n  text-align: right;\n  flex: 1;\n}\n.review-images {\n  display: flex;\n  gap: 10px;\n  flex-wrap: wrap;\n}\n.review-image {\n  width: 100px;\n  height: 100px;\n  object-fit: cover;\n  border-radius: 5px;\n  flex-shrink: 0;\n}\n</style>\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}