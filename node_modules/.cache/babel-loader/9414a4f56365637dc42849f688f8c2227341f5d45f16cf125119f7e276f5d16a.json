{"ast":null,"code":"import { message } from \"ant-design-vue\";\nimport axios from \"axios\";\nimport { createStore } from \"vuex\";\naxios.interceptors.request.use(config => {\n  const token = localStorage.getItem('token');\n  if (token) {\n    // Thêm token vào header Authorization cho tất cả các yêu cầu\n    config.headers['Authorization'] = `Bearer ${token}`;\n  }\n  return config;\n}, error => {\n  // Xử lý lỗi trước khi yêu cầu được gửi đi\n  return Promise.reject(error);\n});\nconst store = createStore({\n  state: {\n    isLoggedIn: false,\n    userInfo: null,\n    editingMode: false,\n    packages: [],\n    deletedPackages: [],\n    users: [],\n    cart: {\n      items: []\n    }\n  },\n  mutations: {\n    SET_USER_INFO(state, userInfo) {\n      state.userInfo = userInfo;\n    },\n    SET_LOGIN_STATE(state, userInfo) {\n      state.isLoggedIn = true;\n      state.userInfo = userInfo;\n    },\n    LOGOUT(state) {\n      state.isLoggedIn = false;\n      state.userInfo = null;\n    },\n    SET_CART(state, cart) {\n      state.cart = cart;\n    },\n    ADD_TO_CART(state, payload) {\n      const item = state.cart.items.find(item => item.dishId === payload.dishId);\n      if (item) {\n        item.quantity += payload.quantity;\n      } else {\n        state.cart.items.push(payload);\n      }\n    },\n    // Cập nhật danh sách các gói trong state\n    SET_PACKAGES(state, packages) {\n      state.packages = packages;\n    },\n    SET_DELETED_PACKAGES(state, deletedPackages) {\n      state.deletedPackages = deletedPackages;\n    },\n    UPDATE_PACKAGE(state, updatedPackage) {\n      // Cập nhật gói trong state\n      const index = state.packages.findIndex(pkg => pkg._id === updatedPackage._id);\n      if (index !== -1) {\n        state.packages[index] = updatedPackage;\n      }\n    },\n    DELETE_PACKAGE(state, packageId) {\n      state.packages = state.packages.filter(pkg => pkg._id !== packageId);\n    },\n    blockUser(state, userId) {\n      const user = state.users.find(user => user.id === userId);\n      if (user) {\n        user.IS_BLOCKED = true;\n      }\n    },\n    UnblockUser(state, userId) {\n      const user = state.users.find(user => user.id === userId);\n      if (user) {\n        user.IS_BLOCKED = false;\n      }\n    },\n    SET_EDITING_MODE(state, mode) {\n      state.editingMode = mode;\n    }\n  },\n  actions: {\n    async fetchPackages({\n      commit\n    }) {\n      try {\n        const response = await axios.get(\"/package/getData\");\n        if (response.data.success) {\n          const notDeletedPackages = response.data.data.filter(pkg => !pkg.IS_DELETE);\n          const deletedPackages = response.data.data.filter(pkg => pkg.IS_DELETE);\n          commit('SET_PACKAGES', notDeletedPackages);\n          commit('SET_DELETED_PACKAGES', deletedPackages);\n        } else {\n          throw new Error(\"Failed to fetch packages\");\n        }\n      } catch (error) {\n        console.error(\"Error fetching packages:\", error);\n        throw error;\n      }\n    },\n    async updatePackage({\n      commit\n    }, updatedPackage) {\n      try {\n        const {\n          _id,\n          IS_DELETE,\n          ...updatedData\n        } = updatedPackage;\n        const response = await axios.put(`/package/update/${_id}`, updatedData);\n        if (response.status === 200) {\n          commit(\"UPDATE_PACKAGE\", updatedPackage);\n          message.success(\"Cập nhật gói thàng công!\");\n        } else {\n          throw new Error(\"Update package failed\");\n        }\n      } catch (error) {\n        console.error(\"Error updating package:\", error);\n        throw error;\n      }\n    },\n    async deletePackage({\n      commit\n    }, packageId) {\n      try {\n        const response = await axios.delete(`/package/delete/${packageId}`);\n        if (response.status === 200) {\n          commit(\"DELETE_PACKAGE\", packageId);\n          message.success(\"Đã xóa gói thành công!\");\n        } else {\n          // Xử lý trường hợp server trả về mã lỗi khác với 200\n          const errorMessage = response.data.message || \"Delete package failed\";\n          throw new Error(errorMessage);\n        }\n      } catch (error) {\n        console.error(\"Error deleting package:\", error);\n        message.error(\"Lỗi khi xóa gói: \" + error.message);\n        throw error;\n      }\n    },\n    async blockUser({\n      commit\n    }, userId) {\n      try {\n        const response = await axios.post(`http://localhost:3000/user/blockUser`, {\n          userId: userId,\n          IS_BLOCKED: true\n        });\n        console.log(response);\n        if (response.status === 200) {\n          commit(\"blockUser\", userId);\n          message.success(\"User has been blocked successfully\");\n        } else {\n          throw new Error(\"Failed to block user: \" + response.statusText);\n        }\n      } catch (error) {\n        console.error(\"Error blocking user:\", error);\n        message.error(\"Error blocking user\");\n      }\n    },\n    async UnblockUser({\n      commit\n    }, userId) {\n      try {\n        const response = await axios.post(`http://localhost:3000/user/blockUser`, {\n          userId: userId,\n          IS_BLOCKED: false\n        });\n        if (response.status === 200) {\n          commit(\"UnblockUser\", userId);\n          message.success(\"User has been unblocked successfully\");\n        } else {\n          throw new Error(\"Failed to unblock user: \" + response.statusText);\n        }\n      } catch (error) {\n        console.error(\"Error unblocking user:\", error);\n        message.error(\"Error unblocking user\");\n        throw error;\n      }\n    },\n    async login({\n      commit,\n      dispatch\n    }, credentials) {\n      try {\n        const response = await axios.post(\"http://localhost:3000/user/loginUser\", {\n          USERNAME: credentials.username,\n          PASSWORD: credentials.password\n        });\n        if (response.status >= 200 && response.status <= 300) {\n          const user = response.data.message;\n          const token = response.data.metadata;\n\n          // Lưu token vào localStorage\n          localStorage.setItem(\"token\", token);\n          console.log(\"Token saved to localStorage:\", token);\n\n          // Lưu trạng thái đăng nhập vào Vuex\n          commit(\"SET_LOGIN_STATE\", user);\n\n          // Gọi hàm getUserInfo để lấy thông tin người dùng chi tiết\n          await dispatch(\"getUserInfo\");\n\n          // Kiểm tra vai trò người dùng để điều hướng\n          if (user.ROLE.IS_ADMIN) {\n            return \"admin\";\n          } else if (user.ROLE.IS_STAFF) {\n            return \"staff\";\n          } else {\n            return 'unauthorized';\n          }\n        }\n      } catch (error) {\n        alert(\"Đăng nhập thất bại. Vui lòng kiểm tra lại thông tin đăng nhập.\" + error.toString());\n        return \"error\";\n      }\n    },\n    async googleLogin({\n      commit,\n      dispatch\n    }) {\n      try {\n        // Bước 1: Gọi API để lấy URL OAuth từ backend và chuyển hướng người dùng đến Google\n        const response = await axios.get(\"http://localhost:3000/user/auth/google\");\n        const authUrl = response.data.authUrl;\n        window.location.href = authUrl;\n\n        // Sau khi người dùng quay lại từ Google, xử lý token ở bước khác trong app, không cần xử lý ở đây nữa\n      } catch (error) {\n        console.error(\"Google login failed:\", error);\n        return \"error\";\n      }\n    },\n    async facebookLogin({\n      commit,\n      dispatch\n    }) {\n      try {\n        // Bước 1: Gọi API để lấy URL OAuth từ backend và chuyển hướng người dùng đến Facebook\n        const response = await axios.get(\"http://localhost:3000/user/auth/facebook\");\n        const authUrl = response.data.authUrl;\n        window.location.href = authUrl;\n\n        // Sau khi người dùng quay lại từ Facebook, xử lý token ở bước khác trong app, không cần xử lý ở đây nữa\n      } catch (error) {\n        console.error(\"Facebook login failed:\", error);\n        return \"error\";\n      }\n    },\n    async getUserInfo({\n      commit\n    }) {\n      try {\n        console.log(\"Starting getUserInfo action\");\n\n        // Gọi API lấy thông tin người dùng mà không cần thêm token vào header vì interceptor đã lo việc này\n        const response = await axios.get(\"http://localhost:3000/user/info\");\n        console.log(\"API response:\", response);\n        if (response.status >= 200 && response.status < 300) {\n          const userInfo = response.data;\n          console.log(\"User info:\", userInfo);\n\n          // Lưu thông tin người dùng vào Vuex\n          commit(\"SET_LOGIN_STATE\", userInfo);\n        } else {\n          console.error(\"Unexpected response status:\", response.status);\n        }\n      } catch (error) {\n        console.error(\"Error while getting user info:\", error);\n      }\n    },\n    async updateUserInfo({\n      commit,\n      state\n    }, updatedInfo) {\n      try {\n        // Perform update request, for example:\n        const response = await axios.put(\"http://localhost:3000/user/updateUser\", updatedInfo);\n        if (response.status >= 200 && response.status < 300) {\n          // Optionally update local state if needed\n          commit(\"SET_USER_INFO\", updatedInfo);\n          commit(\"SET_EDITING_MODE\", false); // Turn off editing mode after successful update\n        } else {\n          console.error(\"Unexpected response status:\", response.status);\n        }\n      } catch (error) {\n        console.error(\"Error while updating user info:\", error);\n        throw error; // Re-throw the error for handling in components\n      }\n    },\n    logout({\n      commit\n    }) {\n      console.log(\"Token before removal:\", localStorage.getItem(\"token\"));\n      localStorage.removeItem(\"token\");\n      commit(\"LOGOUT\");\n      console.log(\"Token after removal:\", localStorage.getItem(\"token\"));\n    },\n    async checkToken({\n      commit,\n      dispatch\n    }) {\n      // Không cần lấy token thủ công từ localStorage vì Axios Interceptor sẽ tự thêm\n      try {\n        // Gọi API lấy thông tin người dùng\n        const response = await axios.get(\"http://localhost:3000/user/info\");\n\n        // Kiểm tra phản hồi từ server\n        if (response.status >= 200 && response.status < 300) {\n          const userInfo = response.data;\n          // Lưu thông tin người dùng vào state\n          commit(\"SET_LOGIN_STATE\", userInfo);\n        } else {\n          console.error(\"Unexpected response status:\", response.status);\n          // Nếu có lỗi, thực hiện logout\n          dispatch(\"logout\");\n        }\n      } catch (error) {\n        // Xử lý lỗi nếu xảy ra trong quá trình gọi API\n        console.error(\"Error while checking token:\", error);\n        dispatch(\"logout\");\n      }\n    },\n    async addToCart({\n      commit\n    }, {\n      dishId,\n      quantity\n    }) {\n      try {\n        const response = await axios.post(\"http://localhost:3000/cart/addCart\", {\n          dishId,\n          quantity\n        });\n        if (response.data.success) {\n          commit(\"ADD_TO_CART\", {\n            dishId,\n            quantity\n          });\n          message.success(`Đã thêm ${quantity} món vào giỏ hàng`);\n          return response;\n        } else {\n          throw new Error(\"Failed to add to cart\");\n        }\n      } catch (error) {\n        message.error(\"Lỗi khi thêm món vào giỏ hàng: \" + error.message);\n        throw error;\n      }\n    },\n    async fetchCart({\n      commit\n    }) {\n      try {\n        const response = await axios.get(\"http://localhost:3000/cart/getCart\");\n        commit('SET_CART', response.data.cart);\n        return response; // Trả về Promise để có thể sử dụng .then() và .catch()\n      } catch (error) {\n        console.error(\"Lỗi khi tải giỏ hàng:\", error);\n        throw error; // Ném lỗi để có thể bắt được trong component\n      }\n    }\n  },\n  getters: {\n    isLoggedIn: state => state.isLoggedIn,\n    userInfo: state => state.userInfo,\n    packages: state => state.packages,\n    deletedPackages: state => state.deletedPackages,\n    editingMode: state => state.editingMode\n  }\n});\nstore.dispatch(\"checkToken\");\nexport default store;","map":{"version":3,"names":["message","axios","createStore","interceptors","request","use","config","token","localStorage","getItem","headers","error","Promise","reject","store","state","isLoggedIn","userInfo","editingMode","packages","deletedPackages","users","cart","items","mutations","SET_USER_INFO","SET_LOGIN_STATE","LOGOUT","SET_CART","ADD_TO_CART","payload","item","find","dishId","quantity","push","SET_PACKAGES","SET_DELETED_PACKAGES","UPDATE_PACKAGE","updatedPackage","index","findIndex","pkg","_id","DELETE_PACKAGE","packageId","filter","blockUser","userId","user","id","IS_BLOCKED","UnblockUser","SET_EDITING_MODE","mode","actions","fetchPackages","commit","response","get","data","success","notDeletedPackages","IS_DELETE","Error","console","updatePackage","updatedData","put","status","deletePackage","delete","errorMessage","post","log","statusText","login","dispatch","credentials","USERNAME","username","PASSWORD","password","metadata","setItem","ROLE","IS_ADMIN","IS_STAFF","alert","toString","googleLogin","authUrl","window","location","href","facebookLogin","getUserInfo","updateUserInfo","updatedInfo","logout","removeItem","checkToken","addToCart","fetchCart","getters"],"sources":["D:/Tiểu Luận Tốt Nghiệp/Frontend/src/store/index.js"],"sourcesContent":["import { message } from \"ant-design-vue\";\nimport axios from \"axios\";\nimport { createStore } from \"vuex\";\n\naxios.interceptors.request.use(\n  (config) => {\n    const token = localStorage.getItem('token');\n    if (token) {\n      // Thêm token vào header Authorization cho tất cả các yêu cầu\n      config.headers['Authorization'] = `Bearer ${token}`;\n    }\n    return config;\n  },\n  (error) => {\n    // Xử lý lỗi trước khi yêu cầu được gửi đi\n    return Promise.reject(error);\n  }\n);\nconst store = createStore({\n  state: {\n    isLoggedIn: false,\n    userInfo: null,\n    editingMode: false,\n    packages: [],\n    deletedPackages: [],\n    users: [],\n    cart: { items: [] },\n  },\n  mutations: {\n    SET_USER_INFO(state, userInfo) {\n      state.userInfo = userInfo;\n    },\n    SET_LOGIN_STATE(state, userInfo) {\n      state.isLoggedIn = true;\n      state.userInfo = userInfo;\n    },\n    LOGOUT(state) {\n      state.isLoggedIn = false;\n      state.userInfo = null;\n    },\n    SET_CART(state, cart) {\n      state.cart = cart;\n    },\n    ADD_TO_CART(state, payload) {\n      const item = state.cart.items.find(item => item.dishId === payload.dishId);\n      if (item) {\n        item.quantity += payload.quantity;\n      } else {\n        state.cart.items.push(payload);\n      }\n    },\n    // Cập nhật danh sách các gói trong state\n    SET_PACKAGES(state, packages) {\n      state.packages = packages;\n    },\n    SET_DELETED_PACKAGES(state, deletedPackages) {\n      state.deletedPackages = deletedPackages;\n    },\n    UPDATE_PACKAGE(state, updatedPackage) {\n      // Cập nhật gói trong state\n      const index = state.packages.findIndex(\n        (pkg) => pkg._id === updatedPackage._id\n      );\n      if (index !== -1) {\n        state.packages[index] = updatedPackage;\n      }\n    },\n    DELETE_PACKAGE(state, packageId) {\n      state.packages = state.packages.filter((pkg) => pkg._id !== packageId);\n    },\n    blockUser(state, userId) {\n      const user = state.users.find((user) => user.id === userId);\n      if (user) {\n        user.IS_BLOCKED = true;\n      }\n    },\n    UnblockUser(state, userId) {\n      const user = state.users.find((user) => user.id === userId);\n      if (user) {\n        user.IS_BLOCKED = false;\n      }\n    },\n    SET_EDITING_MODE(state, mode) {\n      state.editingMode = mode;\n    },\n  },\n  actions: {\n    async fetchPackages({ commit }) {\n      try {\n        const response = await axios.get(\"/package/getData\");\n        if (response.data.success) {\n          const notDeletedPackages = response.data.data.filter(pkg => !pkg.IS_DELETE);\n          const deletedPackages = response.data.data.filter(pkg => pkg.IS_DELETE);\n          commit('SET_PACKAGES', notDeletedPackages);\n          commit('SET_DELETED_PACKAGES', deletedPackages); \n        } else {\n          throw new Error(\"Failed to fetch packages\");\n        }\n      } catch (error) {\n        console.error(\"Error fetching packages:\", error);\n        throw error;\n      }\n    },\n    async updatePackage({ commit }, updatedPackage) {\n      try {\n        const { _id, IS_DELETE, ...updatedData } = updatedPackage;\n\n        const response = await axios.put(`/package/update/${_id}`, updatedData);\n        if (response.status === 200) {\n          commit(\"UPDATE_PACKAGE\", updatedPackage);\n          message.success(\"Cập nhật gói thàng công!\");\n        } else {\n          throw new Error(\"Update package failed\");\n        }\n      } catch (error) {\n        console.error(\"Error updating package:\", error);\n        throw error;\n      }\n    },\n    async deletePackage({ commit }, packageId) {\n      try {\n        const response = await axios.delete(`/package/delete/${packageId}`);\n        if (response.status === 200) {\n          commit(\"DELETE_PACKAGE\", packageId);\n          message.success(\"Đã xóa gói thành công!\");\n        } else {\n          // Xử lý trường hợp server trả về mã lỗi khác với 200\n          const errorMessage = response.data.message || \"Delete package failed\";\n          throw new Error(errorMessage);\n        }\n      } catch (error) {\n        console.error(\"Error deleting package:\", error);\n        message.error(\"Lỗi khi xóa gói: \" + error.message);\n        throw error;\n      }\n    },\n    async blockUser({ commit }, userId) {\n      try {\n        const response = await axios.post(`http://localhost:3000/user/blockUser`, {\n          userId: userId,\n          IS_BLOCKED: true,\n        });\n        console.log(response);\n        if (response.status === 200) {\n          commit(\"blockUser\", userId);\n          message.success(\"User has been blocked successfully\");\n        } else {\n          throw new Error(\"Failed to block user: \" + response.statusText);\n        }\n      } catch (error) {\n        console.error(\"Error blocking user:\", error);\n        message.error(\"Error blocking user\");\n      }\n    },\n    async UnblockUser({ commit }, userId) {\n      try {\n        const response = await axios.post(`http://localhost:3000/user/blockUser`, {\n          userId: userId,\n          IS_BLOCKED: false,\n        });\n        if (response.status === 200) {\n          commit(\"UnblockUser\", userId);\n          message.success(\"User has been unblocked successfully\");\n        } else {\n          throw new Error(\"Failed to unblock user: \" + response.statusText);\n        }\n      } catch (error) {\n        console.error(\"Error unblocking user:\", error);\n        message.error(\"Error unblocking user\");\n        throw error;\n      }\n    },\n\n    async login({ commit, dispatch }, credentials) {\n      try {\n        const response = await axios.post(\"http://localhost:3000/user/loginUser\", {\n          USERNAME: credentials.username,\n          PASSWORD: credentials.password,\n        });\n\n        if (response.status >= 200 && response.status <= 300) {\n          const user = response.data.message;\n          const token = response.data.metadata;\n\n          // Lưu token vào localStorage\n          localStorage.setItem(\"token\", token);\n          console.log(\"Token saved to localStorage:\", token);\n\n          // Lưu trạng thái đăng nhập vào Vuex\n          commit(\"SET_LOGIN_STATE\", user);\n\n          // Gọi hàm getUserInfo để lấy thông tin người dùng chi tiết\n          await dispatch(\"getUserInfo\");\n\n          // Kiểm tra vai trò người dùng để điều hướng\n          if (user.ROLE.IS_ADMIN) {\n            return \"admin\";\n          } else if (user.ROLE.IS_STAFF) {\n            return \"staff\";\n          } else {\n            return 'unauthorized';\n          }\n        }\n      } catch (error) {\n        alert(\n          \"Đăng nhập thất bại. Vui lòng kiểm tra lại thông tin đăng nhập.\" +\n            error.toString()\n        );\n        return \"error\";\n      }\n    },\n    \n    async googleLogin({ commit, dispatch }) {\n      try {\n        // Bước 1: Gọi API để lấy URL OAuth từ backend và chuyển hướng người dùng đến Google\n        const response = await axios.get(\"http://localhost:3000/user/auth/google\");\n        const authUrl = response.data.authUrl;\n        window.location.href = authUrl;\n    \n        // Sau khi người dùng quay lại từ Google, xử lý token ở bước khác trong app, không cần xử lý ở đây nữa\n    \n      } catch (error) {\n        console.error(\"Google login failed:\", error);\n        return \"error\";\n      }\n    },\n    \n    async facebookLogin({ commit, dispatch }) {\n      try {\n        // Bước 1: Gọi API để lấy URL OAuth từ backend và chuyển hướng người dùng đến Facebook\n        const response = await axios.get(\"http://localhost:3000/user/auth/facebook\");\n        const authUrl = response.data.authUrl;\n        window.location.href = authUrl;\n\n        // Sau khi người dùng quay lại từ Facebook, xử lý token ở bước khác trong app, không cần xử lý ở đây nữa\n        \n      } catch (error) {\n        console.error(\"Facebook login failed:\", error);\n        return \"error\";\n      }\n    },\n    \n    async getUserInfo({ commit }) {\n      try {\n        console.log(\"Starting getUserInfo action\");\n\n        // Gọi API lấy thông tin người dùng mà không cần thêm token vào header vì interceptor đã lo việc này\n        const response = await axios.get(\"http://localhost:3000/user/info\");\n        \n        console.log(\"API response:\", response);\n\n        if (response.status >= 200 && response.status < 300) {\n          const userInfo = response.data;\n          console.log(\"User info:\", userInfo);\n\n          // Lưu thông tin người dùng vào Vuex\n          commit(\"SET_LOGIN_STATE\", userInfo);\n        } else {\n          console.error(\"Unexpected response status:\", response.status);\n        }\n      } catch (error) {\n        console.error(\"Error while getting user info:\", error);\n      }\n    },\n    \n    async updateUserInfo({ commit, state }, updatedInfo) {\n      try {\n        // Perform update request, for example:\n        const response = await axios.put(\"http://localhost:3000/user/updateUser\", updatedInfo);\n        if (response.status >= 200 && response.status < 300) {\n          // Optionally update local state if needed\n          commit(\"SET_USER_INFO\", updatedInfo);\n          commit(\"SET_EDITING_MODE\", false); // Turn off editing mode after successful update\n        } else {\n          console.error(\"Unexpected response status:\", response.status);\n        }\n      } catch (error) {\n        console.error(\"Error while updating user info:\", error);\n        throw error; // Re-throw the error for handling in components\n      }\n    },\n    logout({ commit }) {\n      console.log(\"Token before removal:\", localStorage.getItem(\"token\"));\n      localStorage.removeItem(\"token\");\n      commit(\"LOGOUT\");\n      console.log(\"Token after removal:\", localStorage.getItem(\"token\"));\n    },\n    async checkToken({ commit, dispatch }) {\n      // Không cần lấy token thủ công từ localStorage vì Axios Interceptor sẽ tự thêm\n      try {\n        // Gọi API lấy thông tin người dùng\n        const response = await axios.get(\"http://localhost:3000/user/info\");\n    \n        // Kiểm tra phản hồi từ server\n        if (response.status >= 200 && response.status < 300) {\n          const userInfo = response.data;\n          // Lưu thông tin người dùng vào state\n          commit(\"SET_LOGIN_STATE\", userInfo);\n        } else {\n          console.error(\"Unexpected response status:\", response.status);\n          // Nếu có lỗi, thực hiện logout\n          dispatch(\"logout\");\n        }\n      } catch (error) {\n        // Xử lý lỗi nếu xảy ra trong quá trình gọi API\n        console.error(\"Error while checking token:\", error);\n        dispatch(\"logout\");\n      }\n    },\n      async addToCart({ commit }, { dishId, quantity }) {\n        try {\n          const response = await axios.post(\"http://localhost:3000/cart/addCart\", {\n            dishId,\n            quantity\n          });\n          if (response.data.success) {\n            commit(\"ADD_TO_CART\", { dishId, quantity });\n            message.success(`Đã thêm ${quantity} món vào giỏ hàng`);\n            return response;\n          } else {\n            throw new Error(\"Failed to add to cart\");\n          }\n        } catch (error) {\n          message.error(\"Lỗi khi thêm món vào giỏ hàng: \" + error.message);\n          throw error;\n        }\n      },\n    async fetchCart({ commit }) {\n      try {\n        const response = await axios.get(\"http://localhost:3000/cart/getCart\");\n        commit('SET_CART', response.data.cart);\n        return response; // Trả về Promise để có thể sử dụng .then() và .catch()\n      } catch (error) {\n        console.error(\"Lỗi khi tải giỏ hàng:\", error);\n        throw error; // Ném lỗi để có thể bắt được trong component\n      }\n    },\n    \n  },\n  getters: {\n    isLoggedIn: (state) => state.isLoggedIn,\n    userInfo: (state) => state.userInfo,\n    packages: (state) => state.packages,\n    deletedPackages: state => state.deletedPackages,\n    editingMode: (state) => state.editingMode,\n  },\n});\n\nstore.dispatch(\"checkToken\");\n\nexport default store;\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}