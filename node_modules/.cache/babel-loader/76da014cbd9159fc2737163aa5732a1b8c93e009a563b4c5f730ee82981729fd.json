{"ast":null,"code":"import { onMounted, ref } from \"vue\";\nimport { useRouter } from \"vue-router\";\nexport default {\n  name: \"Navbar\",\n  setup() {\n    const isAdmin = ref(false);\n    const router = useRouter();\n\n    // Kiểm tra trạng thái đăng nhập\n    const checkLoginStatus = () => {\n      const token = localStorage.getItem(\"accessToken\");\n      if (token) {\n        const user = JSON.parse(localStorage.getItem(\"user\")); // Lấy thông tin người dùng từ localStorage\n        isLoggedIn.value = true;\n        isAdmin.value = user && user.ROLE && user.ROLE.IS_ADMIN; // Kiểm tra quyền admin\n      } else {\n        isLoggedIn.value = false;\n        isAdmin.value = false;\n      }\n    };\n\n    // Hàm đăng xuất\n    const logout = () => {\n      localStorage.removeItem(\"accessToken\");\n      localStorage.removeItem(\"user\");\n      isLoggedIn.value = false;\n      isAdmin.value = false;\n      router.push(\"/\"); // Điều hướng về trang chủ sau khi đăng xuất\n    };\n    onMounted(() => {\n      checkLoginStatus(); // Kiểm tra trạng thái đăng nhập khi component được mount\n    });\n    return {\n      isLoggedIn,\n      isAdmin,\n      logout\n    };\n  }\n};","map":{"version":3,"names":["onMounted","ref","useRouter","name","setup","isAdmin","router","checkLoginStatus","token","localStorage","getItem","user","JSON","parse","isLoggedIn","value","ROLE","IS_ADMIN","logout","removeItem","push"],"sources":["D:\\Tiểu Luận Tốt Nghiệp\\Frontend\\src\\components\\Layout\\Navbar.vue"],"sourcesContent":["<template>\n  <div class=\"container-fluid nav-bar\">\n    <div class=\"container\">\n      <nav class=\"navbar navbar-light navbar-expand-lg py-4\">\n        <router-link to=\"/\" class=\"navbar-brand\">\n          <h1 class=\"text-primary fw-bold mb-0\">\n            MTHN<span class=\"text-dark\">Restaurant</span>\n          </h1>\n        </router-link>\n        <button\n          class=\"navbar-toggler py-2 px-3\"\n          type=\"button\"\n          data-bs-toggle=\"collapse\"\n          data-bs-target=\"#navbarCollapse\"\n        >\n          <span class=\"fa fa-bars text-primary\"></span>\n        </button>\n        <div class=\"collapse navbar-collapse\" id=\"navbarCollapse\">\n          <div class=\"navbar-nav mx-auto\">\n            <router-link\n              to=\"/\"\n              class=\"nav-item nav-link\"\n              exact-active-class=\"active\"\n              exact\n              >Trang Chủ</router-link\n            >\n            <router-link\n              to=\"/about\"\n              class=\"nav-item nav-link\"\n              active-class=\"active\"\n              >Giới Thiệu</router-link\n            >\n            <router-link\n              to=\"/services\"\n              class=\"nav-item nav-link\"\n              active-class=\"active\"\n              >Khuyến Mãi</router-link\n            >\n            <router-link\n              to=\"/events\"\n              class=\"nav-item nav-link\"\n              active-class=\"active\"\n              >Gói Tiệc</router-link\n            >\n            <router-link\n              to=\"/menu\"\n              class=\"nav-item nav-link\"\n              active-class=\"active\"\n              >Món Ăn</router-link\n            >\n            <div class=\"nav-item dropdown\">\n              <a\n                href=\"#\"\n                class=\"nav-link dropdown-toggle\"\n                data-bs-toggle=\"dropdown\"\n                >Sự Kiện</a\n              >\n              <div class=\"dropdown-menu bg-light\">\n                <router-link\n                  to=\"/book\"\n                  class=\"dropdown-item\"\n                  active-class=\"active\"\n                  >Tiệc Cưới</router-link\n                >\n                <router-link\n                  to=\"/blog\"\n                  class=\"dropdown-item\"\n                  active-class=\"active\"\n                  >Sinh Nhật</router-link\n                >\n                <router-link\n                  to=\"/team\"\n                  class=\"dropdown-item\"\n                  active-class=\"active\"\n                  >ABC</router-link\n                >\n                <router-link\n                  to=\"/testimonial\"\n                  class=\"dropdown-item\"\n                  active-class=\"active\"\n                  >ABC2</router-link\n                >\n                <router-link\n                  to=\"/404\"\n                  class=\"dropdown-item\"\n                  active-class=\"active\"\n                  >404 Page</router-link\n                >\n              </div>\n            </div>\n            <router-link\n              to=\"/contact\"\n              class=\"nav-item nav-link\"\n              active-class=\"active\"\n              >Liên Hệ</router-link\n            >\n          </div>\n          <button\n            class=\"btn-search btn btn-primary btn-md-square me-4 rounded-circle d-none d-lg-inline-flex\"\n            data-bs-toggle=\"modal\"\n            data-bs-target=\"#searchModal\"\n          >\n            <i class=\"fas fa-search\"></i>\n          </button>\n          <!-- <div class=\"d-flex\">\n            <router-link\n              to=\"/login\"\n              class=\"btn btn-sm btn-outline-primary rounded-circle me-2\"\n              active-class=\"active\"\n            >\n              <i class=\"fas fa-user\"></i>\n            </router-link>\n            <router-link\n              to=\"/register\"\n              class=\"btn btn-sm btn-outline-primary rounded-circle\"\n              active-class=\"active\"\n            >\n              <i class=\"fas fa-user-plus\"></i>\n            </router-link>\n          </div> -->\n\n          <!-- Dropdown cho nút trên thiết bị nhỏ -->\n\n          <div class=\"dropdown\">\n            <button\n              class=\"btn btn-sm btn-outline-primary dropdown-toggle\"\n              type=\"button\"\n              data-bs-toggle=\"dropdown\"\n              aria-expanded=\"false\"\n            >\n              <i class=\"fas fa-user\"></i>\n            </button>\n\n            <ul class=\"dropdown-menu dropdown-menu-end\">\n              <!-- Hiển thị \"Trang Quản Lý\" nếu người dùng là admin -->\n              <li v-if=\"isLoggedIn && isAdmin\">\n                <router-link\n                  to=\"/admin\"\n                  class=\"dropdown-item\"\n                  active-class=\"active\"\n                >\n                  Trang Quản Lý\n                </router-link>\n              </li>\n\n              <!-- Hiển thị nút \"Đăng Xuất\" nếu đã đăng nhập -->\n              <li v-if=\"isLoggedIn\">\n                <button @click=\"logout\" class=\"dropdown-item\">Đăng Xuất</button>\n              </li>\n\n              <!-- Hiển thị \"Đăng Nhập\" và \"Đăng Ký\" nếu chưa đăng nhập -->\n              <li v-else>\n                <router-link\n                  to=\"/login\"\n                  class=\"dropdown-item\"\n                  active-class=\"active\"\n                >\n                  Đăng Nhập\n                </router-link>\n              </li>\n              <li v-if=\"!isLoggedIn\">\n                <router-link\n                  to=\"/register\"\n                  class=\"dropdown-item\"\n                  active-class=\"active\"\n                >\n                  Đăng Ký\n                </router-link>\n              </li>\n            </ul>\n          </div>\n        </div>\n      </nav>\n    </div>\n  </div>\n</template>\n\n<script>\nimport { onMounted, ref } from \"vue\";\nimport { useRouter } from \"vue-router\";\n\nexport default {\n  name: \"Navbar\",\n  setup() {\n    const isAdmin = ref(false);\n    const router = useRouter();\n\n    // Kiểm tra trạng thái đăng nhập\n    const checkLoginStatus = () => {\n      const token = localStorage.getItem(\"accessToken\");\n      if (token) {\n        const user = JSON.parse(localStorage.getItem(\"user\")); // Lấy thông tin người dùng từ localStorage\n        isLoggedIn.value = true;\n        isAdmin.value = user && user.ROLE && user.ROLE.IS_ADMIN; // Kiểm tra quyền admin\n      } else {\n        isLoggedIn.value = false;\n        isAdmin.value = false;\n      }\n    };\n\n    // Hàm đăng xuất\n    const logout = () => {\n      localStorage.removeItem(\"accessToken\");\n      localStorage.removeItem(\"user\");\n      isLoggedIn.value = false;\n      isAdmin.value = false;\n      router.push(\"/\"); // Điều hướng về trang chủ sau khi đăng xuất\n    };\n\n    onMounted(() => {\n      checkLoginStatus(); // Kiểm tra trạng thái đăng nhập khi component được mount\n    });\n\n    return {\n      isLoggedIn,\n      isAdmin,\n      logout,\n    };\n  },\n};\n</script>\n\n<style scoped>\n/* Add your CSS styles here, if necessary */\n</style>\n"],"mappings":"AAkLA,SAASA,SAAS,EAAEC,GAAE,QAAS,KAAK;AACpC,SAASC,SAAQ,QAAS,YAAY;AAEtC,eAAe;EACbC,IAAI,EAAE,QAAQ;EACdC,KAAKA,CAAA,EAAG;IACN,MAAMC,OAAM,GAAIJ,GAAG,CAAC,KAAK,CAAC;IAC1B,MAAMK,MAAK,GAAIJ,SAAS,CAAC,CAAC;;IAE1B;IACA,MAAMK,gBAAe,GAAIA,CAAA,KAAM;MAC7B,MAAMC,KAAI,GAAIC,YAAY,CAACC,OAAO,CAAC,aAAa,CAAC;MACjD,IAAIF,KAAK,EAAE;QACT,MAAMG,IAAG,GAAIC,IAAI,CAACC,KAAK,CAACJ,YAAY,CAACC,OAAO,CAAC,MAAM,CAAC,CAAC,EAAE;QACvDI,UAAU,CAACC,KAAI,GAAI,IAAI;QACvBV,OAAO,CAACU,KAAI,GAAIJ,IAAG,IAAKA,IAAI,CAACK,IAAG,IAAKL,IAAI,CAACK,IAAI,CAACC,QAAQ,EAAE;MAC3D,OAAO;QACLH,UAAU,CAACC,KAAI,GAAI,KAAK;QACxBV,OAAO,CAACU,KAAI,GAAI,KAAK;MACvB;IACF,CAAC;;IAED;IACA,MAAMG,MAAK,GAAIA,CAAA,KAAM;MACnBT,YAAY,CAACU,UAAU,CAAC,aAAa,CAAC;MACtCV,YAAY,CAACU,UAAU,CAAC,MAAM,CAAC;MAC/BL,UAAU,CAACC,KAAI,GAAI,KAAK;MACxBV,OAAO,CAACU,KAAI,GAAI,KAAK;MACrBT,MAAM,CAACc,IAAI,CAAC,GAAG,CAAC,EAAE;IACpB,CAAC;IAEDpB,SAAS,CAAC,MAAM;MACdO,gBAAgB,CAAC,CAAC,EAAE;IACtB,CAAC,CAAC;IAEF,OAAO;MACLO,UAAU;MACVT,OAAO;MACPa;IACF,CAAC;EACH;AACF,CAAC","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}