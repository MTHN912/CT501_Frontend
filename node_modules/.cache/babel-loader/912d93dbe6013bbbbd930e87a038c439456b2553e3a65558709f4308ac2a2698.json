{"ast":null,"code":"import { message } from \"ant-design-vue\";\nimport axios from \"axios\";\nimport { createStore } from \"vuex\";\naxios.interceptors.request.use(config => {\n  const token = localStorage.getItem('token');\n  if (token) {\n    // Thêm token vào header Authorization cho tất cả các yêu cầu\n    config.headers['Authorization'] = `Bearer ${token}`;\n  }\n  return config;\n}, error => {\n  // Xử lý lỗi trước khi yêu cầu được gửi đi\n  return Promise.reject(error);\n});\nconst store = createStore({\n  state: {\n    isLoggedIn: false,\n    userInfo: null,\n    editingMode: false,\n    packages: [],\n    deletedPackages: [],\n    users: [],\n    cart: {\n      items: []\n    },\n    averageRating: 0,\n    totalReviews: 0,\n    dishRatings: {},\n    dishTotalReviews: {}\n  },\n  mutations: {\n    SET_USER_INFO(state, userInfo) {\n      state.userInfo = userInfo;\n    },\n    SET_LOGIN_STATE(state, userInfo) {\n      state.isLoggedIn = true;\n      state.userInfo = userInfo;\n    },\n    LOGOUT(state) {\n      state.isLoggedIn = false;\n      state.userInfo = null;\n    },\n    SET_CART(state, cart) {\n      state.cart = cart;\n    },\n    ADD_TO_CART(state, payload) {\n      const item = state.cart.items.find(item => item.dishId === payload.dishId);\n      if (item) {\n        item.quantity += payload.quantity;\n      } else {\n        state.cart.items.push(payload);\n      }\n    },\n    // Cập nhật danh sách các gói trong state\n    SET_PACKAGES(state, packages) {\n      state.packages = packages;\n    },\n    SET_DELETED_PACKAGES(state, deletedPackages) {\n      state.deletedPackages = deletedPackages;\n    },\n    UPDATE_PACKAGE(state, updatedPackage) {\n      // Cập nhật gói trong state\n      const index = state.packages.findIndex(pkg => pkg._id === updatedPackage._id);\n      if (index !== -1) {\n        state.packages[index] = updatedPackage;\n      }\n    },\n    DELETE_PACKAGE(state, packageId) {\n      state.packages = state.packages.filter(pkg => pkg._id !== packageId);\n    },\n    blockUser(state, userId) {\n      const user = state.users.find(user => user.id === userId);\n      if (user) {\n        user.IS_BLOCKED = true;\n      }\n    },\n    UnblockUser(state, userId) {\n      const user = state.users.find(user => user.id === userId);\n      if (user) {\n        user.IS_BLOCKED = false;\n      }\n    },\n    SET_EDITING_MODE(state, mode) {\n      state.editingMode = mode;\n    },\n    SET_AVERAGE_RATING(state, {\n      averageRating,\n      totalReviews\n    }) {\n      state.averageRating = averageRating;\n      state.totalReviews = totalReviews;\n    },\n    SET_DISH_RATING(state, {\n      dishId,\n      averageRating,\n      totalReviews\n    }) {\n      state.dishRatings = {\n        ...state.dishRatings,\n        [dishId]: averageRating // Cập nhật điểm đánh giá trung bình cho từng món ăn\n      };\n      state.dishTotalReviews = {\n        ...state.dishTotalReviews,\n        [dishId]: totalReviews // Cập nhật tổng số lượt đánh giá cho từng món ăn\n      };\n    }\n  },\n  actions: {\n    async fetchPackages({\n      commit\n    }) {\n      try {\n        const response = await axios.get(\"/package/getData\");\n        if (response.data.success) {\n          const notDeletedPackages = response.data.data.filter(pkg => !pkg.IS_DELETE);\n          const deletedPackages = response.data.data.filter(pkg => pkg.IS_DELETE);\n          commit('SET_PACKAGES', notDeletedPackages);\n          commit('SET_DELETED_PACKAGES', deletedPackages);\n        } else {\n          throw new Error(\"Failed to fetch packages\");\n        }\n      } catch (error) {\n        console.error(\"Error fetching packages:\", error);\n        throw error;\n      }\n    },\n    async updatePackage({\n      commit\n    }, updatedPackage) {\n      try {\n        const {\n          _id,\n          IS_DELETE,\n          ...updatedData\n        } = updatedPackage;\n        const response = await axios.put(`/package/update/${_id}`, updatedData);\n        if (response.status === 200) {\n          commit(\"UPDATE_PACKAGE\", updatedPackage);\n          message.success(\"Cập nhật gói thàng công!\");\n        } else {\n          throw new Error(\"Update package failed\");\n        }\n      } catch (error) {\n        console.error(\"Error updating package:\", error);\n        throw error;\n      }\n    },\n    async deletePackage({\n      commit\n    }, packageId) {\n      try {\n        const response = await axios.delete(`/package/delete/${packageId}`);\n        if (response.status === 200) {\n          commit(\"DELETE_PACKAGE\", packageId);\n          message.success(\"Đã xóa gói thành công!\");\n        } else {\n          // Xử lý trường hợp server trả về mã lỗi khác với 200\n          const errorMessage = response.data.message || \"Delete package failed\";\n          throw new Error(errorMessage);\n        }\n      } catch (error) {\n        console.error(\"Error deleting package:\", error);\n        message.error(\"Lỗi khi xóa gói: \" + error.message);\n        throw error;\n      }\n    },\n    async blockUser({\n      commit\n    }, userId) {\n      try {\n        const response = await axios.post(`http://localhost:3000/user/blockUser`, {\n          userId: userId,\n          IS_BLOCKED: true\n        });\n        console.log(response);\n        if (response.status === 200) {\n          commit(\"blockUser\", userId);\n          message.success(\"User has been blocked successfully\");\n        } else {\n          throw new Error(\"Failed to block user: \" + response.statusText);\n        }\n      } catch (error) {\n        console.error(\"Error blocking user:\", error);\n        message.error(\"Error blocking user\");\n      }\n    },\n    async UnblockUser({\n      commit\n    }, userId) {\n      try {\n        const response = await axios.post(`http://localhost:3000/user/blockUser`, {\n          userId: userId,\n          IS_BLOCKED: false\n        });\n        if (response.status === 200) {\n          commit(\"UnblockUser\", userId);\n          message.success(\"User has been unblocked successfully\");\n        } else {\n          throw new Error(\"Failed to unblock user: \" + response.statusText);\n        }\n      } catch (error) {\n        console.error(\"Error unblocking user:\", error);\n        message.error(\"Error unblocking user\");\n        throw error;\n      }\n    },\n    async login({\n      commit,\n      dispatch\n    }, credentials) {\n      try {\n        const response = await axios.post(\"http://localhost:3000/user/loginUser\", {\n          USERNAME: credentials.username,\n          PASSWORD: credentials.password\n        });\n        if (response.status >= 200 && response.status <= 300) {\n          const user = response.data.message;\n          const token = response.data.metadata;\n\n          // Lưu token vào localStorage\n          localStorage.setItem(\"token\", token);\n          console.log(\"Token saved to localStorage:\", token);\n\n          // Lưu trạng thái đăng nhập vào Vuex\n          commit(\"SET_LOGIN_STATE\", user);\n\n          // Gọi hàm getUserInfo để lấy thông tin người dùng chi tiết\n          await dispatch(\"getUserInfo\");\n\n          // Kiểm tra vai trò người dùng để điều hướng\n          if (user.ROLE.IS_ADMIN) {\n            return \"admin\";\n          } else if (user.ROLE.IS_STAFF) {\n            return \"staff\";\n          } else {\n            return 'unauthorized';\n          }\n        }\n      } catch (error) {\n        alert(\"Đăng nhập thất bại. Vui lòng kiểm tra lại thông tin đăng nhập.\" + error.toString());\n        return \"error\";\n      }\n    },\n    async googleLogin({\n      commit,\n      dispatch\n    }) {\n      try {\n        // Bước 1: Gọi API để lấy URL OAuth từ backend và chuyển hướng người dùng đến Google\n        const response = await axios.get(\"http://localhost:3000/user/auth/google\");\n        const authUrl = response.data.authUrl;\n        window.location.href = authUrl;\n\n        // Sau khi người dùng quay lại từ Google, xử lý token ở bước khác trong app, không cần xử lý ở đây nữa\n      } catch (error) {\n        console.error(\"Google login failed:\", error);\n        return \"error\";\n      }\n    },\n    async facebookLogin({\n      commit,\n      dispatch\n    }) {\n      try {\n        // Bước 1: Gọi API để lấy URL OAuth từ backend và chuyển hướng người dùng đến Facebook\n        const response = await axios.get(\"http://localhost:3000/user/auth/facebook\");\n        const authUrl = response.data.authUrl;\n        window.location.href = authUrl;\n\n        // Sau khi người dùng quay lại từ Facebook, xử lý token ở bước khác trong app, không cần xử lý ở đây nữa\n      } catch (error) {\n        console.error(\"Facebook login failed:\", error);\n        return \"error\";\n      }\n    },\n    async getUserInfo({\n      commit\n    }) {\n      try {\n        console.log(\"Starting getUserInfo action\");\n\n        // Gọi API lấy thông tin người dùng mà không cần thêm token vào header vì interceptor đã lo việc này\n        const response = await axios.get(\"http://localhost:3000/user/info\");\n        console.log(\"API response:\", response);\n        if (response.status >= 200 && response.status < 300) {\n          const userInfo = response.data;\n          console.log(\"User info:\", userInfo);\n\n          // Lưu thông tin người dùng vào Vuex\n          commit(\"SET_LOGIN_STATE\", userInfo);\n        } else {\n          console.error(\"Unexpected response status:\", response.status);\n        }\n      } catch (error) {\n        console.error(\"Error while getting user info:\", error);\n      }\n    },\n    async updateUserInfo({\n      commit,\n      state\n    }, updatedInfo) {\n      try {\n        // Perform update request, for example:\n        const response = await axios.put(\"http://localhost:3000/user/updateUser\", updatedInfo);\n        if (response.status >= 200 && response.status < 300) {\n          // Optionally update local state if needed\n          commit(\"SET_USER_INFO\", updatedInfo);\n          commit(\"SET_EDITING_MODE\", false); // Turn off editing mode after successful update\n        } else {\n          console.error(\"Unexpected response status:\", response.status);\n        }\n      } catch (error) {\n        console.error(\"Error while updating user info:\", error);\n        throw error; // Re-throw the error for handling in components\n      }\n    },\n    async logout({\n      commit\n    }) {\n      console.log(\"Token before removal:\", localStorage.getItem(\"token\"));\n      localStorage.removeItem(\"token\");\n      commit(\"LOGOUT\");\n      console.log(\"Token after removal:\", localStorage.getItem(\"token\"));\n    },\n    async checkToken({\n      commit,\n      dispatch\n    }) {\n      // Không cần lấy token thủ công từ localStorage vì Axios Interceptor sẽ tự thêm\n      try {\n        // Gọi API lấy thông tin người dùng\n        const response = await axios.get(\"http://localhost:3000/user/info\");\n\n        // Kiểm tra phản hồi từ server\n        if (response.status >= 200 && response.status < 300) {\n          const userInfo = response.data;\n          // Lưu thông tin người dùng vào state\n          commit(\"SET_LOGIN_STATE\", userInfo);\n        } else {\n          console.error(\"Unexpected response status:\", response.status);\n          // Nếu có lỗi, thực hiện logout\n          dispatch(\"logout\");\n        }\n      } catch (error) {\n        // Xử lý lỗi nếu xảy ra trong quá trình gọi API\n        console.error(\"Error while checking token:\", error);\n        dispatch(\"logout\");\n      }\n    },\n    async addToCart({\n      commit\n    }, {\n      dishId,\n      quantity\n    }) {\n      try {\n        const response = await axios.post(\"http://localhost:3000/cart/addCart\", {\n          dishId,\n          quantity\n        });\n        if (response.status === 200 || response.status === 201) {\n          commit(\"ADD_TO_CART\", {\n            dishId,\n            quantity\n          });\n          message.success(`Đã thêm ${quantity} món vào giỏ hàng`);\n          return response;\n        } else {\n          throw new Error(\"Failed to add to cart\");\n        }\n      } catch (error) {\n        message.error(\"Lỗi khi thêm món vào giỏ hàng: \" + error.message);\n        throw error;\n      }\n    },\n    async fetchCart({\n      commit\n    }) {\n      try {\n        const response = await axios.get(\"http://localhost:3000/cart/getCart\");\n        commit('SET_CART', response.data.cart);\n        return response; // Trả về Promise để có thể sử dụng .then() và .catch()\n      } catch (error) {\n        console.error(\"Lỗi khi tải giỏ hàng:\", error);\n        throw error; // Ném lỗi để có thể bắt được trong component\n      }\n    },\n    async removeItem({\n      commit,\n      dispatch\n    }, dishId) {\n      try {\n        await axios.post(\"http://localhost:3000/cart/removeCart\", {\n          dishId: dishId\n        });\n        // Sau khi xóa món thành công, gọi lại hành động fetchCart để cập nhật giỏ hàng\n        await dispatch('fetchCart');\n      } catch (error) {\n        console.error(\"Lỗi khi bỏ món:\", error);\n      }\n    },\n    async fetchAverageRating({\n      commit\n    }, dishId) {\n      try {\n        const response = await axios.get(`http://localhost:3000/review/getAverageRating/${dishId}`);\n        const {\n          average,\n          totalReviews\n        } = response.data;\n        commit('SET_AVERAGE_RATING', {\n          averageRating: average,\n          totalReviews\n        });\n      } catch (error) {\n        console.error(\"Lỗi khi lấy điểm đánh giá trung bình:\", error);\n      }\n    },\n    async fetchDishRating({\n      commit\n    }, dishId) {\n      try {\n        const response = await axios.get(`http://localhost:3000/review/getAverageRating/${dishId}`);\n        const {\n          average,\n          totalReviews\n        } = response.data;\n        commit('SET_DISH_RATING', {\n          dishId,\n          averageRating: average,\n          totalReviews\n        });\n      } catch (error) {\n        console.error(\"Lỗi khi lấy điểm đánh giá của món ăn:\", error);\n      }\n    }\n  },\n  getters: {\n    isLoggedIn: state => state.isLoggedIn,\n    userInfo: state => state.userInfo,\n    packages: state => state.packages,\n    deletedPackages: state => state.deletedPackages,\n    editingMode: state => state.editingMode,\n    cartItems: state => state.cart.items,\n    averageRating: state => state.averageRating,\n    totalReviews: state => state.totalReviews,\n    getDishRating: state => dishId => {\n      return state.dishRatings[dishId] || 0;\n    },\n    getTotalReviews: state => dishId => {\n      return state.dishTotalReviews[dishId] || 0; // Trả về tổng số lượt đánh giá hoặc 0 nếu không có\n    }\n  }\n});\nstore.dispatch(\"checkToken\");\nexport default store;","map":{"version":3,"names":["message","axios","createStore","interceptors","request","use","config","token","localStorage","getItem","headers","error","Promise","reject","store","state","isLoggedIn","userInfo","editingMode","packages","deletedPackages","users","cart","items","averageRating","totalReviews","dishRatings","dishTotalReviews","mutations","SET_USER_INFO","SET_LOGIN_STATE","LOGOUT","SET_CART","ADD_TO_CART","payload","item","find","dishId","quantity","push","SET_PACKAGES","SET_DELETED_PACKAGES","UPDATE_PACKAGE","updatedPackage","index","findIndex","pkg","_id","DELETE_PACKAGE","packageId","filter","blockUser","userId","user","id","IS_BLOCKED","UnblockUser","SET_EDITING_MODE","mode","SET_AVERAGE_RATING","SET_DISH_RATING","actions","fetchPackages","commit","response","get","data","success","notDeletedPackages","IS_DELETE","Error","console","updatePackage","updatedData","put","status","deletePackage","delete","errorMessage","post","log","statusText","login","dispatch","credentials","USERNAME","username","PASSWORD","password","metadata","setItem","ROLE","IS_ADMIN","IS_STAFF","alert","toString","googleLogin","authUrl","window","location","href","facebookLogin","getUserInfo","updateUserInfo","updatedInfo","logout","removeItem","checkToken","addToCart","fetchCart","fetchAverageRating","average","fetchDishRating","getters","cartItems","getDishRating","getTotalReviews"],"sources":["D:/Tiểu Luận Tốt Nghiệp/Frontend/src/store/index.js"],"sourcesContent":["import { message } from \"ant-design-vue\";\nimport axios from \"axios\";\nimport { createStore } from \"vuex\";\n\naxios.interceptors.request.use(\n  (config) => {\n    const token = localStorage.getItem('token');\n    if (token) {\n      // Thêm token vào header Authorization cho tất cả các yêu cầu\n      config.headers['Authorization'] = `Bearer ${token}`;\n    }\n    return config;\n  },\n  (error) => {\n    // Xử lý lỗi trước khi yêu cầu được gửi đi\n    return Promise.reject(error);\n  }\n);\nconst store = createStore({\n  state: {\n    isLoggedIn: false,\n    userInfo: null,\n    editingMode: false,\n    packages: [],\n    deletedPackages: [],\n    users: [],\n    cart: { items: [] },\n    averageRating: 0,\n    totalReviews: 0,\n    dishRatings: {},\n    dishTotalReviews: {}, \n  },\n  mutations: {\n    SET_USER_INFO(state, userInfo) {\n      state.userInfo = userInfo;\n    },\n    SET_LOGIN_STATE(state, userInfo) {\n      state.isLoggedIn = true;\n      state.userInfo = userInfo;\n    },\n    LOGOUT(state) {\n      state.isLoggedIn = false;\n      state.userInfo = null;\n    },\n    SET_CART(state, cart) {\n      state.cart = cart;\n    },\n    ADD_TO_CART(state, payload) {\n      const item = state.cart.items.find(item => item.dishId === payload.dishId);\n      if (item) {\n        item.quantity += payload.quantity;\n      } else {\n        state.cart.items.push(payload);\n      }\n    },\n    // Cập nhật danh sách các gói trong state\n    SET_PACKAGES(state, packages) {\n      state.packages = packages;\n    },\n    SET_DELETED_PACKAGES(state, deletedPackages) {\n      state.deletedPackages = deletedPackages;\n    },\n    UPDATE_PACKAGE(state, updatedPackage) {\n      // Cập nhật gói trong state\n      const index = state.packages.findIndex(\n        (pkg) => pkg._id === updatedPackage._id\n      );\n      if (index !== -1) {\n        state.packages[index] = updatedPackage;\n      }\n    },\n    DELETE_PACKAGE(state, packageId) {\n      state.packages = state.packages.filter((pkg) => pkg._id !== packageId);\n    },\n    blockUser(state, userId) {\n      const user = state.users.find((user) => user.id === userId);\n      if (user) {\n        user.IS_BLOCKED = true;\n      }\n    },\n    UnblockUser(state, userId) {\n      const user = state.users.find((user) => user.id === userId);\n      if (user) {\n        user.IS_BLOCKED = false;\n      }\n    },\n    SET_EDITING_MODE(state, mode) {\n      state.editingMode = mode;\n    },\n    SET_AVERAGE_RATING(state, { averageRating, totalReviews }) {\n      state.averageRating = averageRating;\n      state.totalReviews = totalReviews;\n    },\n    SET_DISH_RATING(state, { dishId, averageRating, totalReviews }) {\n      state.dishRatings = {\n        ...state.dishRatings,\n        [dishId]: averageRating, // Cập nhật điểm đánh giá trung bình cho từng món ăn\n      };\n      state.dishTotalReviews = {\n        ...state.dishTotalReviews,\n        [dishId]: totalReviews, // Cập nhật tổng số lượt đánh giá cho từng món ăn\n      };\n    },\n  },\n  actions: {\n    async fetchPackages({ commit }) {\n      try {\n        const response = await axios.get(\"/package/getData\");\n        if (response.data.success) {\n          const notDeletedPackages = response.data.data.filter(pkg => !pkg.IS_DELETE);\n          const deletedPackages = response.data.data.filter(pkg => pkg.IS_DELETE);\n          commit('SET_PACKAGES', notDeletedPackages);\n          commit('SET_DELETED_PACKAGES', deletedPackages); \n        } else {\n          throw new Error(\"Failed to fetch packages\");\n        }\n      } catch (error) {\n        console.error(\"Error fetching packages:\", error);\n        throw error;\n      }\n    },\n    async updatePackage({ commit }, updatedPackage) {\n      try {\n        const { _id, IS_DELETE, ...updatedData } = updatedPackage;\n\n        const response = await axios.put(`/package/update/${_id}`, updatedData);\n        if (response.status === 200) {\n          commit(\"UPDATE_PACKAGE\", updatedPackage);\n          message.success(\"Cập nhật gói thàng công!\");\n        } else {\n          throw new Error(\"Update package failed\");\n        }\n      } catch (error) {\n        console.error(\"Error updating package:\", error);\n        throw error;\n      }\n    },\n    async deletePackage({ commit }, packageId) {\n      try {\n        const response = await axios.delete(`/package/delete/${packageId}`);\n        if (response.status === 200) {\n          commit(\"DELETE_PACKAGE\", packageId);\n          message.success(\"Đã xóa gói thành công!\");\n        } else {\n          // Xử lý trường hợp server trả về mã lỗi khác với 200\n          const errorMessage = response.data.message || \"Delete package failed\";\n          throw new Error(errorMessage);\n        }\n      } catch (error) {\n        console.error(\"Error deleting package:\", error);\n        message.error(\"Lỗi khi xóa gói: \" + error.message);\n        throw error;\n      }\n    },\n    async blockUser({ commit }, userId) {\n      try {\n        const response = await axios.post(`http://localhost:3000/user/blockUser`, {\n          userId: userId,\n          IS_BLOCKED: true,\n        });\n        console.log(response);\n        if (response.status === 200) {\n          commit(\"blockUser\", userId);\n          message.success(\"User has been blocked successfully\");\n        } else {\n          throw new Error(\"Failed to block user: \" + response.statusText);\n        }\n      } catch (error) {\n        console.error(\"Error blocking user:\", error);\n        message.error(\"Error blocking user\");\n      }\n    },\n    async UnblockUser({ commit }, userId) {\n      try {\n        const response = await axios.post(`http://localhost:3000/user/blockUser`, {\n          userId: userId,\n          IS_BLOCKED: false,\n        });\n        if (response.status === 200) {\n          commit(\"UnblockUser\", userId);\n          message.success(\"User has been unblocked successfully\");\n        } else {\n          throw new Error(\"Failed to unblock user: \" + response.statusText);\n        }\n      } catch (error) {\n        console.error(\"Error unblocking user:\", error);\n        message.error(\"Error unblocking user\");\n        throw error;\n      }\n    },\n\n    async login({ commit, dispatch }, credentials) {\n      try {\n        const response = await axios.post(\"http://localhost:3000/user/loginUser\", {\n          USERNAME: credentials.username,\n          PASSWORD: credentials.password,\n        });\n\n        if (response.status >= 200 && response.status <= 300) {\n          const user = response.data.message;\n          const token = response.data.metadata;\n\n          // Lưu token vào localStorage\n          localStorage.setItem(\"token\", token);\n          console.log(\"Token saved to localStorage:\", token);\n\n          // Lưu trạng thái đăng nhập vào Vuex\n          commit(\"SET_LOGIN_STATE\", user);\n\n          // Gọi hàm getUserInfo để lấy thông tin người dùng chi tiết\n          await dispatch(\"getUserInfo\");\n\n          // Kiểm tra vai trò người dùng để điều hướng\n          if (user.ROLE.IS_ADMIN) {\n            return \"admin\";\n          } else if (user.ROLE.IS_STAFF) {\n            return \"staff\";\n          } else {\n            return 'unauthorized';\n          }\n        }\n      } catch (error) {\n        alert(\n          \"Đăng nhập thất bại. Vui lòng kiểm tra lại thông tin đăng nhập.\" +\n            error.toString()\n        );\n        return \"error\";\n      }\n    },\n    \n    async googleLogin({ commit, dispatch }) {\n      try {\n        // Bước 1: Gọi API để lấy URL OAuth từ backend và chuyển hướng người dùng đến Google\n        const response = await axios.get(\"http://localhost:3000/user/auth/google\");\n        const authUrl = response.data.authUrl;\n        window.location.href = authUrl;\n    \n        // Sau khi người dùng quay lại từ Google, xử lý token ở bước khác trong app, không cần xử lý ở đây nữa\n    \n      } catch (error) {\n        console.error(\"Google login failed:\", error);\n        return \"error\";\n      }\n    },\n    \n    async facebookLogin({ commit, dispatch }) {\n      try {\n        // Bước 1: Gọi API để lấy URL OAuth từ backend và chuyển hướng người dùng đến Facebook\n        const response = await axios.get(\"http://localhost:3000/user/auth/facebook\");\n        const authUrl = response.data.authUrl;\n        window.location.href = authUrl;\n\n        // Sau khi người dùng quay lại từ Facebook, xử lý token ở bước khác trong app, không cần xử lý ở đây nữa\n        \n      } catch (error) {\n        console.error(\"Facebook login failed:\", error);\n        return \"error\";\n      }\n    },\n    \n    async getUserInfo({ commit }) {\n      try {\n        console.log(\"Starting getUserInfo action\");\n\n        // Gọi API lấy thông tin người dùng mà không cần thêm token vào header vì interceptor đã lo việc này\n        const response = await axios.get(\"http://localhost:3000/user/info\");\n        \n        console.log(\"API response:\", response);\n\n        if (response.status >= 200 && response.status < 300) {\n          const userInfo = response.data;\n          console.log(\"User info:\", userInfo);\n\n          // Lưu thông tin người dùng vào Vuex\n          commit(\"SET_LOGIN_STATE\", userInfo);\n        } else {\n          console.error(\"Unexpected response status:\", response.status);\n        }\n      } catch (error) {\n        console.error(\"Error while getting user info:\", error);\n      }\n    },\n    \n    async updateUserInfo({ commit, state }, updatedInfo) {\n      try {\n        // Perform update request, for example:\n        const response = await axios.put(\"http://localhost:3000/user/updateUser\", updatedInfo);\n        if (response.status >= 200 && response.status < 300) {\n          // Optionally update local state if needed\n          commit(\"SET_USER_INFO\", updatedInfo);\n          commit(\"SET_EDITING_MODE\", false); // Turn off editing mode after successful update\n        } else {\n          console.error(\"Unexpected response status:\", response.status);\n        }\n      } catch (error) {\n        console.error(\"Error while updating user info:\", error);\n        throw error; // Re-throw the error for handling in components\n      }\n    },\n    async logout({ commit }) {\n      console.log(\"Token before removal:\", localStorage.getItem(\"token\"));\n      localStorage.removeItem(\"token\");\n      commit(\"LOGOUT\");\n      console.log(\"Token after removal:\", localStorage.getItem(\"token\"));\n    },\n    async checkToken({ commit, dispatch }) {\n      // Không cần lấy token thủ công từ localStorage vì Axios Interceptor sẽ tự thêm\n      try {\n        // Gọi API lấy thông tin người dùng\n        const response = await axios.get(\"http://localhost:3000/user/info\");\n    \n        // Kiểm tra phản hồi từ server\n        if (response.status >= 200 && response.status < 300) {\n          const userInfo = response.data;\n          // Lưu thông tin người dùng vào state\n          commit(\"SET_LOGIN_STATE\", userInfo);\n        } else {\n          console.error(\"Unexpected response status:\", response.status);\n          // Nếu có lỗi, thực hiện logout\n          dispatch(\"logout\");\n        }\n      } catch (error) {\n        // Xử lý lỗi nếu xảy ra trong quá trình gọi API\n        console.error(\"Error while checking token:\", error);\n        dispatch(\"logout\");\n      }\n    },\n    async addToCart({ commit }, { dishId, quantity }) {\n      try {\n        const response = await axios.post(\"http://localhost:3000/cart/addCart\", {\n          dishId,\n          quantity\n        });\n        if (response.status === 200 || response.status === 201) {\n          commit(\"ADD_TO_CART\", { dishId, quantity });\n          message.success(`Đã thêm ${quantity} món vào giỏ hàng`);\n          return response;\n        } else {\n          throw new Error(\"Failed to add to cart\");\n        }\n      } catch (error) {\n        message.error(\"Lỗi khi thêm món vào giỏ hàng: \" + error.message);\n        throw error;\n      }\n    },\n    async fetchCart({ commit }) {\n      try {\n        const response = await axios.get(\"http://localhost:3000/cart/getCart\");\n        commit('SET_CART', response.data.cart);\n        return response; // Trả về Promise để có thể sử dụng .then() và .catch()\n      } catch (error) {\n        console.error(\"Lỗi khi tải giỏ hàng:\", error);\n        throw error; // Ném lỗi để có thể bắt được trong component\n      }\n    },\n    async removeItem({ commit, dispatch }, dishId) {\n      try {\n        await axios.post(\"http://localhost:3000/cart/removeCart\", {\n          dishId: dishId,\n        });\n        // Sau khi xóa món thành công, gọi lại hành động fetchCart để cập nhật giỏ hàng\n        await dispatch('fetchCart');\n      } catch (error) {\n        console.error(\"Lỗi khi bỏ món:\", error);\n      }\n    },\n    async fetchAverageRating({ commit }, dishId) {\n      try {\n        const response = await axios.get(\n          `http://localhost:3000/review/getAverageRating/${dishId}`\n        );\n        const { average, totalReviews } = response.data;\n        commit('SET_AVERAGE_RATING', { averageRating: average, totalReviews });\n      } catch (error) {\n        console.error(\"Lỗi khi lấy điểm đánh giá trung bình:\", error);\n      }\n    },\n    async fetchDishRating({ commit }, dishId) {\n      try {\n        const response = await axios.get(\n          `http://localhost:3000/review/getAverageRating/${dishId}`\n        );\n        const { average, totalReviews } = response.data;\n        commit('SET_DISH_RATING', { dishId, averageRating: average, totalReviews });\n      } catch (error) {\n        console.error(\"Lỗi khi lấy điểm đánh giá của món ăn:\", error);\n      }\n    },\n  },\n  getters: {\n    isLoggedIn: (state) => state.isLoggedIn,\n    userInfo: (state) => state.userInfo,\n    packages: (state) => state.packages,\n    deletedPackages: state => state.deletedPackages,\n    editingMode: (state) => state.editingMode,\n    cartItems: (state) => state.cart.items,\n    averageRating: (state) => state.averageRating,\n    totalReviews: (state) => state.totalReviews,\n    getDishRating: (state) => (dishId) => {\n      return state.dishRatings[dishId] || 0;\n    },\n    getTotalReviews: (state) => (dishId) => {\n      return state.dishTotalReviews[dishId] || 0; // Trả về tổng số lượt đánh giá hoặc 0 nếu không có\n    },\n  },\n});\n\nstore.dispatch(\"checkToken\");\n\nexport default store;\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}