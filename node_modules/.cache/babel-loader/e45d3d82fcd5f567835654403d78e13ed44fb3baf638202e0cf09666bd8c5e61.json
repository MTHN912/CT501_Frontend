{"ast":null,"code":"import { createElementVNode as _createElementVNode, createCommentVNode as _createCommentVNode, toDisplayString as _toDisplayString, openBlock as _openBlock, createElementBlock as _createElementBlock, Fragment as _Fragment } from \"vue\";\nconst _hoisted_1 = {\n  class: \"profile-container\"\n};\nconst _hoisted_2 = {\n  class: \"profile-card\"\n};\nconst _hoisted_3 = {\n  class: \"profile-title\"\n};\nconst _hoisted_4 = {\n  for: \"avatarInput\"\n};\nconst _hoisted_5 = [\"src\"];\nconst _hoisted_6 = {\n  class: \"profile-info\"\n};\nconst _hoisted_7 = {\n  class: \"info-item\"\n};\nconst _hoisted_8 = {\n  class: \"content\"\n};\nconst _hoisted_9 = {\n  class: \"info-item\"\n};\nconst _hoisted_10 = {\n  key: 0,\n  class: \"content\"\n};\nconst _hoisted_11 = [\"value\"];\nconst _hoisted_12 = {\n  class: \"info-item\"\n};\nconst _hoisted_13 = {\n  key: 0,\n  class: \"content\"\n};\nconst _hoisted_14 = [\"value\"];\nconst _hoisted_15 = {\n  class: \"info-item\"\n};\nconst _hoisted_16 = {\n  key: 0,\n  class: \"content\"\n};\nconst _hoisted_17 = [\"value\"];\nconst _hoisted_18 = {\n  class: \"action-buttons\"\n};\nexport function render(_ctx, _cache, $props, $setup, $data, $options) {\n  return _openBlock(), _createElementBlock(_Fragment, null, [_cache[12] || (_cache[12] = _createElementVNode(\"h2\", {\n    class: \"title\"\n  }, \"Thông Tin Cá Nhân\", -1 /* HOISTED */)), _createElementVNode(\"div\", _hoisted_1, [_createElementVNode(\"div\", _hoisted_2, [_createElementVNode(\"div\", _hoisted_3, [_createElementVNode(\"label\", _hoisted_4, [_createElementVNode(\"img\", {\n    src: _ctx.userInfo?.AVATAR || $data.avatarUrl || 'default-avatar.png',\n    alt: \"Avatar\",\n    class: \"avatar\"\n  }, null, 8 /* PROPS */, _hoisted_5), _createCommentVNode(\" <h4>{{ userInfo?.USERNAME }}</h4> \")]), _createElementVNode(\"input\", {\n    id: \"avatarInput\",\n    type: \"file\",\n    style: {\n      \"display\": \"none\"\n    },\n    ref: \"fileInput\",\n    onChange: _cache[0] || (_cache[0] = (...args) => $options.handleFileUpload && $options.handleFileUpload(...args))\n  }, null, 544 /* NEED_HYDRATION, NEED_PATCH */)]), _createElementVNode(\"div\", _hoisted_6, [_createElementVNode(\"div\", _hoisted_7, [_createElementVNode(\"p\", null, [_cache[7] || (_cache[7] = _createElementVNode(\"strong\", null, \"Tên đăng nhập:\", -1 /* HOISTED */)), _createElementVNode(\"span\", _hoisted_8, _toDisplayString(_ctx.userInfo?.USERNAME), 1 /* TEXT */)])]), _createElementVNode(\"div\", _hoisted_9, [_createElementVNode(\"p\", null, [_cache[8] || (_cache[8] = _createElementVNode(\"strong\", null, \"Họ và tên:\", -1 /* HOISTED */)), !$data.editing ? (_openBlock(), _createElementBlock(\"span\", _hoisted_10, _toDisplayString(_ctx.userInfo?.FULLNAME), 1 /* TEXT */)) : (_openBlock(), _createElementBlock(\"input\", {\n    key: 1,\n    type: \"text\",\n    value: $data.editData.FULLNAME,\n    onInput: _cache[1] || (_cache[1] = $event => $options.updateEditData('FULLNAME', $event.target.value))\n  }, null, 40 /* PROPS, NEED_HYDRATION */, _hoisted_11))])]), _createElementVNode(\"div\", _hoisted_12, [_createElementVNode(\"p\", null, [_cache[10] || (_cache[10] = _createElementVNode(\"strong\", null, \"Giới tính:\", -1 /* HOISTED */)), !$data.editing ? (_openBlock(), _createElementBlock(\"span\", _hoisted_13, _toDisplayString(_ctx.userInfo?.GENDER), 1 /* TEXT */)) : (_openBlock(), _createElementBlock(\"select\", {\n    key: 1,\n    value: $data.editData.GENDER,\n    onChange: _cache[2] || (_cache[2] = $event => $options.updateEditData('GENDER', $event.target.value))\n  }, _cache[9] || (_cache[9] = [_createElementVNode(\"option\", {\n    value: \"Male\"\n  }, \"Male\", -1 /* HOISTED */), _createElementVNode(\"option\", {\n    value: \"Female\"\n  }, \"Female\", -1 /* HOISTED */), _createElementVNode(\"option\", {\n    value: \"Other\"\n  }, \"Other\", -1 /* HOISTED */)]), 40 /* PROPS, NEED_HYDRATION */, _hoisted_14))])]), _createElementVNode(\"div\", _hoisted_15, [_createElementVNode(\"p\", null, [_cache[11] || (_cache[11] = _createElementVNode(\"strong\", null, \"Địa chỉ:\", -1 /* HOISTED */)), !$data.editing ? (_openBlock(), _createElementBlock(\"span\", _hoisted_16, _toDisplayString(_ctx.userInfo?.ADDRESS), 1 /* TEXT */)) : (_openBlock(), _createElementBlock(\"input\", {\n    key: 1,\n    type: \"text\",\n    value: $data.editData.ADDRESS,\n    onInput: _cache[3] || (_cache[3] = $event => $options.updateEditData('ADDRESS', $event.target.value))\n  }, null, 40 /* PROPS, NEED_HYDRATION */, _hoisted_17))])])]), _createElementVNode(\"div\", _hoisted_18, [!$data.editing ? (_openBlock(), _createElementBlock(\"button\", {\n    key: 0,\n    onClick: _cache[4] || (_cache[4] = (...args) => $options.editProfile && $options.editProfile(...args))\n  }, \"Chỉnh sửa\")) : _createCommentVNode(\"v-if\", true), $data.editing ? (_openBlock(), _createElementBlock(\"button\", {\n    key: 1,\n    onClick: _cache[5] || (_cache[5] = (...args) => $options.saveProfile && $options.saveProfile(...args))\n  }, \"Lưu\")) : _createCommentVNode(\"v-if\", true), $data.editing ? (_openBlock(), _createElementBlock(\"button\", {\n    key: 2,\n    onClick: _cache[6] || (_cache[6] = (...args) => $options.cancelEdit && $options.cancelEdit(...args))\n  }, \"Hủy\")) : _createCommentVNode(\"v-if\", true)])])])], 64 /* STABLE_FRAGMENT */);\n}","map":{"version":3,"names":["class","for","key","_createElementBlock","_Fragment","_createElementVNode","_hoisted_1","_hoisted_2","_hoisted_3","_hoisted_4","src","_ctx","userInfo","AVATAR","$data","avatarUrl","alt","_hoisted_5","_createCommentVNode","id","type","style","ref","onChange","_cache","args","$options","handleFileUpload","_hoisted_6","_hoisted_7","_hoisted_8","_toDisplayString","USERNAME","_hoisted_9","editing","_hoisted_10","FULLNAME","value","editData","onInput","$event","updateEditData","target","_hoisted_11","_hoisted_12","_hoisted_13","GENDER","_hoisted_14","_hoisted_15","_hoisted_16","ADDRESS","_hoisted_17","_hoisted_18","onClick","editProfile","saveProfile","cancelEdit"],"sources":["D:\\Tiểu Luận Tốt Nghiệp\\Frontend\\src\\components\\Profie\\Profile.vue"],"sourcesContent":["<template>\n  <h2 class=\"title\">Thông Tin Cá Nhân</h2>\n  <div class=\"profile-container\">\n    <div class=\"profile-card\">\n      <div class=\"profile-title\">\n        <label for=\"avatarInput\">\n          <img\n            :src=\"userInfo?.AVATAR || avatarUrl || 'default-avatar.png'\"\n            alt=\"Avatar\"\n            class=\"avatar\"\n          />\n          <!-- <h4>{{ userInfo?.USERNAME }}</h4> -->\n        </label>\n        <input\n          id=\"avatarInput\"\n          type=\"file\"\n          style=\"display: none\"\n          ref=\"fileInput\"\n          @change=\"handleFileUpload\"\n        />\n      </div>\n      <div class=\"profile-info\">\n        <div class=\"info-item\">\n          <p>\n            <strong>Tên đăng nhập:</strong>\n            <span class=\"content\">{{ userInfo?.USERNAME }}</span>\n          </p>\n        </div>\n        <div class=\"info-item\">\n          <p>\n            <strong>Họ và tên:</strong>\n            <template v-if=\"!editing\">\n              <span class=\"content\">{{ userInfo?.FULLNAME }}</span>\n            </template>\n            <input\n              v-else\n              type=\"text\"\n              :value=\"editData.FULLNAME\"\n              @input=\"updateEditData('FULLNAME', $event.target.value)\"\n            />\n          </p>\n        </div>\n        <div class=\"info-item\">\n          <p>\n            <strong>Giới tính:</strong>\n            <template v-if=\"!editing\">\n              <span class=\"content\">{{ userInfo?.GENDER }}</span>\n            </template>\n            <select\n              v-else\n              :value=\"editData.GENDER\"\n              @change=\"updateEditData('GENDER', $event.target.value)\"\n            >\n              <option value=\"Male\">Male</option>\n              <option value=\"Female\">Female</option>\n              <option value=\"Other\">Other</option>\n            </select>\n          </p>\n        </div>\n        <div class=\"info-item\">\n          <p>\n            <strong>Địa chỉ:</strong>\n            <template v-if=\"!editing\">\n              <span class=\"content\">{{ userInfo?.ADDRESS }}</span>\n            </template>\n            <input\n              v-else\n              type=\"text\"\n              :value=\"editData.ADDRESS\"\n              @input=\"updateEditData('ADDRESS', $event.target.value)\"\n            />\n          </p>\n        </div>\n      </div>\n      <div class=\"action-buttons\">\n        <button v-if=\"!editing\" @click=\"editProfile\">Chỉnh sửa</button>\n        <button v-if=\"editing\" @click=\"saveProfile\">Lưu</button>\n        <button v-if=\"editing\" @click=\"cancelEdit\">Hủy</button>\n      </div>\n    </div>\n  </div>\n</template>\n\n<script>\nimport axios from \"axios\";\nimport { mapActions, mapState } from \"vuex\";\n\nexport default {\n  data() {\n    return {\n      avatarUrl: null,\n      editing: false,\n      editData: {\n        FULLNAME: \"\",\n        ADDRESS: \"\",\n        GENDER: \"\",\n      },\n      originalData: {},\n    };\n  },\n  computed: {\n    ...mapState([\"userInfo\"]),\n  },\n  methods: {\n    ...mapActions([\"getUserInfo\"]),\n    editProfile() {\n      this.originalData = { ...this.userInfo };\n      this.editData = {\n        FULLNAME: this.userInfo.FULLNAME,\n        ADDRESS: this.userInfo.ADDRESS,\n        GENDER: this.userInfo.GENDER,\n      };\n      this.editing = true;\n    },\n    async saveProfile() {\n      try {\n        const filteredEditData = this.filterEmptyFields(this.editData);\n        const updatedUser = await this.updateUserInfo(filteredEditData);\n        await this.getUserInfo();\n        this.editing = false;\n      } catch (error) {\n        console.error(\n          \"Lỗi cập nhật thông tin:\",\n          error.response?.data?.message || error.message\n        );\n      }\n    },\n    filterEmptyFields(data) {\n      return Object.keys(data)\n        .filter((key) => data[key] !== null && data[key] !== \"\")\n        .reduce((acc, key) => {\n          acc[key] = data[key];\n          return acc;\n        }, {});\n    },\n    async updateUserInfo(updatedUser) {\n      try {\n        const response = await axios.put(\n          \"http://localhost:3000/user/updateUser\",\n          updatedUser\n        );\n        return response.data;\n      } catch (error) {\n        console.error(\n          \"Lỗi cập nhật thông tin:\",\n          error.response?.data?.message || error.message\n        );\n        throw error;\n      }\n    },\n    handleFileUpload(event) {\n      const file = event.target.files[0];\n      this.uploadAvatar(file);\n    },\n    async uploadAvatar(file) {\n      const formData = new FormData();\n      formData.append(\"AVATAR\", file);\n\n      try {\n        const response = await axios.post(\n          \"http://localhost:3000/azure/upload\",\n          formData,\n          {\n            headers: {\n              \"Content-Type\": \"multipart/form-data\",\n            },\n          }\n        );\n\n        this.avatarUrl = response.data.imageUrl;\n      } catch (error) {\n        console.error(\"Lỗi upload avatar:\", error);\n      }\n    },\n    updateEditData(field, value) {\n      this.editData[field] = value;\n    },\n    cancelEdit() {\n      this.editData = { ...this.originalData };\n      this.editing = false;\n    },\n  },\n  mounted() {\n    if (!this.userInfo) {\n      this.getUserInfo();\n    }\n  },\n};\n</script>\n\n<style scoped>\n.title {\n  font-size: 2rem;\n  margin-bottom: 20px;\n  text-align: center;\n}\n.profile-container {\n  display: flex;\n  justify-content: center;\n  align-items: center;\n  height: 100%;\n}\n\n.profile-card {\n  width: 80%;\n  padding: 40px; /* Tăng padding cho cảm giác thoáng hơn */\n  background-color: #f0f2f5;\n  margin-top: 20px;\n  box-shadow: 0 2px 4px rgba(0, 0, 0, 0.1);\n  border-radius: 10px;\n}\n\n.profile-title {\n  display: flex;\n  align-items: center;\n  justify-content: center;\n  flex-direction: column; /* Đảm bảo tiêu đề và avatar xếp theo cột */\n  gap: 10px;\n  text-align: center;\n  margin-bottom: 20px;\n}\n\n.avatar {\n  margin-bottom: 10px;\n  width: 150px; /* Tăng kích thước lớn hơn nữa */\n  height: 150px; /* Tăng kích thước lớn hơn nữa */\n  border-radius: 50%;\n}\n\n.profile-info {\n  margin-top: 20px;\n}\n\n.info-item {\n  margin-bottom: 10px;\n  font-size: 16px;\n  text-align: left;\n}\n\n.info-item strong {\n  font-weight: bold;\n  font-size: 18px;\n}\n\n.info-item p {\n  font-size: 16px;\n}\n.info-item input,\n.info-item select {\n  width: 100%;\n  padding: 8px;\n  margin-top: 5px;\n  font-size: 16px;\n  border-radius: 4px;\n  border: 1px solid #ccc;\n}\n\n.action-buttons {\n  display: flex;\n  justify-content: center; /* Căn giữa các nút */\n  gap: 10px;\n}\n\nbutton {\n  padding: 10px 20px; /* Tăng kích thước nút */\n  border-radius: 5px; /* Làm nút trông tròn hơn */\n  font-size: 16px;\n  cursor: pointer;\n  transition: background-color 0.3s ease;\n}\n\nbutton:hover {\n  background-color: #1890ff;\n  color: white;\n}\n\n@media screen and (max-width: 768px) {\n  .profile-card {\n    width: 100%;\n  }\n}\n\n.content {\n  margin-left: 8px;\n}\n</style>\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}