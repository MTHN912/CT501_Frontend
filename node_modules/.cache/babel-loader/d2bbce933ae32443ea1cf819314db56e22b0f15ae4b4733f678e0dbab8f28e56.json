{"ast":null,"code":"import { mapActions, mapState } from \"vuex\";\nexport default {\n  name: \"CartDetail\",\n  data() {\n    return {\n      isLoading: true // Trạng thái đang tải dữ liệu\n    };\n  },\n  computed: {\n    ...mapState([\"cart\"]),\n    // Lấy giỏ hàng từ state trong store\n\n    totalQuantity() {\n      if (this.cart && this.cart.items) {\n        return this.cart.items.reduce((total, item) => total + item.quantity, 0);\n      }\n      return 0;\n    },\n    totalPrice() {\n      if (this.cart && this.cart.items) {\n        return this.cart.items.reduce((total, item) => total + item.totalPriceForItem, 0);\n      }\n      return 0;\n    }\n  },\n  methods: {\n    ...mapActions([\"fetchCart\", \"addToCart\", \"removeItem\"]),\n    // Liên kết các hành động từ store\n\n    async increaseQuantity(item) {\n      try {\n        await this.addToCart({\n          dishId: item.dishId,\n          quantity: 1\n        });\n        await this.fetchCart(); // Cập nhật lại giỏ hàng sau khi tăng số lượng\n      } catch (error) {\n        console.error(\"Lỗi khi tăng số lượng:\", error);\n      }\n    },\n    async decreaseQuantity(item) {\n      if (item.quantity > 1) {\n        try {\n          await this.addToCart({\n            dishId: item.dishId,\n            quantity: -1\n          });\n          await this.fetchCart(); // Cập nhật lại giỏ hàng sau khi giảm số lượng\n        } catch (error) {\n          console.error(\"Lỗi khi giảm số lượng:\", error);\n        }\n      }\n    },\n    async handleRemoveItem(dishId) {\n      try {\n        // Gọi action từ Vuex store\n        await this.$store.dispatch(\"removeItem\", dishId);\n      } catch (error) {\n        console.error(\"Lỗi khi bỏ món:\", error);\n      }\n    },\n    checkout() {\n      this.$router.push({\n        name: \"Checkout\"\n      });\n    }\n  },\n  async mounted() {\n    try {\n      await this.fetchCart(); // Tải dữ liệu giỏ hàng từ store\n    } finally {\n      this.isLoading = false; // Dừng trạng thái tải sau khi dữ liệu đã lấy về\n    }\n  }\n};","map":{"version":3,"names":["mapActions","mapState","name","data","isLoading","computed","totalQuantity","cart","items","reduce","total","item","quantity","totalPrice","totalPriceForItem","methods","increaseQuantity","addToCart","dishId","fetchCart","error","console","decreaseQuantity","handleRemoveItem","$store","dispatch","checkout","$router","push","mounted"],"sources":["D:\\Tiểu Luận Tốt Nghiệp\\Frontend\\src\\components\\Menu\\Cart.vue"],"sourcesContent":["<template>\n  <div class=\"cart-container\">\n    <h2 class=\"title\">Thực Đơn của Bạn</h2>\n\n    <!-- Hiển thị thông báo đang tải nếu dữ liệu chưa tải xong -->\n    <div v-if=\"isLoading\" class=\"loading\">\n      <p>Đang tải dữ liệu...</p>\n    </div>\n\n    <!-- Hiển thị giỏ hàng khi dữ liệu đã tải xong -->\n    <div\n      v-if=\"cart && cart.items && cart.items.length > 0\"\n      class=\"cart-details\"\n    >\n      <ul class=\"cart-item-list\">\n        <li v-for=\"(item, index) in cart.items\" :key=\"index\" class=\"cart-item\">\n          <div class=\"cart-item-info\">\n            <!-- Hiển thị thông tin món ăn -->\n            <div class=\"cart-item-text\">\n              <h3>{{ item.dishName }}</h3>\n              <p>\n                Số lượng:\n                <!-- Nút Giảm số lượng -->\n                <button\n                  @click=\"decreaseQuantity(item)\"\n                  :disabled=\"item.quantity === 1\"\n                >\n                  -\n                </button>\n                <strong>{{ item.quantity }}</strong>\n                <!-- Nút Tăng số lượng -->\n                <button @click=\"increaseQuantity(item)\">+</button>\n              </p>\n              <p>\n                Đơn giá: <strong>{{ item.dishPrice }} đ</strong>\n              </p>\n              <p>\n                Tổng giá: <strong>{{ item.totalPriceForItem }} đ</strong>\n              </p>\n            </div>\n            <img :src=\"item.dishImage\" alt=\"dish image\" class=\"dish-image\" />\n            <button\n              @click=\"handleRemoveItem(item.dishId)\"\n              class=\"remove-button\"\n            >\n              Bỏ món\n            </button>\n          </div>\n        </li>\n      </ul>\n\n      <div class=\"cart-summary\">\n        <h3>Tổng cộng</h3>\n        <p>\n          Tổng số món: <strong>{{ totalQuantity }}</strong>\n        </p>\n        <p>\n          Tổng giá tất cả: <strong>{{ totalPrice }} đ</strong>\n        </p>\n        <button @click=\"checkout\" class=\"checkout-button\">Đặt Bàn</button>\n      </div>\n    </div>\n\n    <div v-else>\n      <p>Thực đơn của bạn đang trống.</p>\n    </div>\n  </div>\n</template>\n\n<script>\nimport { mapActions, mapState } from \"vuex\";\n\nexport default {\n  name: \"CartDetail\",\n  data() {\n    return {\n      isLoading: true, // Trạng thái đang tải dữ liệu\n    };\n  },\n  computed: {\n    ...mapState([\"cart\"]), // Lấy giỏ hàng từ state trong store\n\n    totalQuantity() {\n      if (this.cart && this.cart.items) {\n        return this.cart.items.reduce(\n          (total, item) => total + item.quantity,\n          0\n        );\n      }\n      return 0;\n    },\n    totalPrice() {\n      if (this.cart && this.cart.items) {\n        return this.cart.items.reduce(\n          (total, item) => total + item.totalPriceForItem,\n          0\n        );\n      }\n      return 0;\n    },\n  },\n  methods: {\n    ...mapActions([\"fetchCart\", \"addToCart\", \"removeItem\"]), // Liên kết các hành động từ store\n\n    async increaseQuantity(item) {\n      try {\n        await this.addToCart({ dishId: item.dishId, quantity: 1 });\n        await this.fetchCart(); // Cập nhật lại giỏ hàng sau khi tăng số lượng\n      } catch (error) {\n        console.error(\"Lỗi khi tăng số lượng:\", error);\n      }\n    },\n\n    async decreaseQuantity(item) {\n      if (item.quantity > 1) {\n        try {\n          await this.addToCart({ dishId: item.dishId, quantity: -1 });\n          await this.fetchCart(); // Cập nhật lại giỏ hàng sau khi giảm số lượng\n        } catch (error) {\n          console.error(\"Lỗi khi giảm số lượng:\", error);\n        }\n      }\n    },\n\n    async handleRemoveItem(dishId) {\n      try {\n        // Gọi action từ Vuex store\n        await this.$store.dispatch(\"removeItem\", dishId);\n      } catch (error) {\n        console.error(\"Lỗi khi bỏ món:\", error);\n      }\n    },\n\n    checkout() {\n      this.$router.push({ name: \"Checkout\" });\n    },\n  },\n  async mounted() {\n    try {\n      await this.fetchCart(); // Tải dữ liệu giỏ hàng từ store\n    } finally {\n      this.isLoading = false; // Dừng trạng thái tải sau khi dữ liệu đã lấy về\n    }\n  },\n};\n</script>\n\n<style scoped>\n.cart-container {\n  padding: 20px;\n  max-width: 800px;\n  margin: 0 auto;\n  background-color: #f9f9f9;\n  border-radius: 10px;\n  box-shadow: 0 4px 8px rgba(0, 0, 0, 0.1);\n}\n\n.title {\n  font-size: 28px;\n  font-weight: bold;\n  color: #333;\n  text-align: center;\n  margin-bottom: 20px;\n}\n\n.loading {\n  text-align: center;\n  font-size: 18px;\n  color: #777;\n}\n\n.cart-item-list {\n  list-style: none;\n  padding: 0;\n}\n\n.cart-item {\n  display: flex;\n  align-items: center;\n  justify-content: space-between;\n  border-bottom: 1px solid #ddd;\n  padding: 15px 0;\n  transition: background-color 0.3s ease;\n  min-height: 150px; /* Cố định chiều cao tối thiểu cho các mục */\n}\n\n.cart-item:hover {\n  background-color: #f1f1f1;\n}\n\n.cart-item-info {\n  display: flex;\n  align-items: center;\n  justify-content: space-between;\n  width: 100%;\n}\n.cart-item-text {\n  flex: 1;\n  display: flex;\n  flex-direction: column;\n  justify-content: center;\n  min-height: 100px; /* Cố định chiều cao cho thông tin món ăn */\n}\n.cart-item-text button {\n  background-color: #007bff;\n  color: white;\n  border: none;\n  padding: 5px 10px;\n  margin: 0 5px;\n  cursor: pointer;\n  border-radius: 5px;\n  font-size: 16px;\n  width: 40px; /* Cố định kích thước cho nút */\n  height: 40px;\n  text-align: center;\n}\n\n.cart-item-text button:disabled {\n  background-color: #cccccc;\n  cursor: not-allowed;\n}\n\n.cart-item-text button:hover:enabled {\n  background-color: #0056b3;\n}\n\n.dish-image {\n  width: 300px; /* Cố định kích thước ảnh */\n  height: 200px;\n  object-fit: cover;\n  margin-left: 40px;\n  margin-right: 20px;\n  border-radius: 10px;\n  align-self: center; /* Đảm bảo hình ảnh được căn giữa theo trục dọc */\n}\n.remove-button {\n  background-color: #dc3545;\n  color: white;\n  border: none;\n  padding: 8px 16px;\n  cursor: pointer;\n  border-radius: 5px;\n  transition: background-color 0.3s ease;\n  white-space: nowrap;\n}\n\n.remove-button:hover {\n  background-color: #c82333;\n}\n\n.cart-summary {\n  position: fixed;\n  right: 20px; /* Khoảng cách từ bên phải */\n  bottom: 20px; /* Khoảng cách từ dưới cùng */\n  padding: 20px;\n  background-color: #fff; /* Nền trắng để dễ đọc */\n  border: 1px solid #ddd; /* Đường viền mỏng */\n  border-radius: 10px; /* Bo góc */\n  box-shadow: 0 4px 8px rgba(0, 0, 0, 0.1); /* Đổ bóng nhẹ */\n  max-width: 300px; /* Chiều rộng tối đa để không chiếm quá nhiều diện tích */\n  z-index: 1000; /* Đảm bảo phần \"Tổng Cộng\" luôn ở trên cùng */\n  text-align: right;\n}\n\n.cart-summary h3,\n.cart-summary p {\n  margin-left: 20px; /* Khoảng cách giữa các dòng */\n}\n.checkout-button {\n  background-color: #28a745;\n  color: white;\n  border: none;\n  padding: 12px 20px;\n  cursor: pointer;\n  font-size: 18px;\n  border-radius: 5px;\n  transition: background-color 0.3s ease;\n  /* width: 100%; Cố định chiều rộng cho nút */\n}\n\n.checkout-button:hover {\n  background-color: #218838;\n}\n</style>\n"],"mappings":"AAsEA,SAASA,UAAU,EAAEC,QAAO,QAAS,MAAM;AAE3C,eAAe;EACbC,IAAI,EAAE,YAAY;EAClBC,IAAIA,CAAA,EAAG;IACL,OAAO;MACLC,SAAS,EAAE,IAAI,CAAE;IACnB,CAAC;EACH,CAAC;EACDC,QAAQ,EAAE;IACR,GAAGJ,QAAQ,CAAC,CAAC,MAAM,CAAC,CAAC;IAAE;;IAEvBK,aAAaA,CAAA,EAAG;MACd,IAAI,IAAI,CAACC,IAAG,IAAK,IAAI,CAACA,IAAI,CAACC,KAAK,EAAE;QAChC,OAAO,IAAI,CAACD,IAAI,CAACC,KAAK,CAACC,MAAM,CAC3B,CAACC,KAAK,EAAEC,IAAI,KAAKD,KAAI,GAAIC,IAAI,CAACC,QAAQ,EACtC,CACF,CAAC;MACH;MACA,OAAO,CAAC;IACV,CAAC;IACDC,UAAUA,CAAA,EAAG;MACX,IAAI,IAAI,CAACN,IAAG,IAAK,IAAI,CAACA,IAAI,CAACC,KAAK,EAAE;QAChC,OAAO,IAAI,CAACD,IAAI,CAACC,KAAK,CAACC,MAAM,CAC3B,CAACC,KAAK,EAAEC,IAAI,KAAKD,KAAI,GAAIC,IAAI,CAACG,iBAAiB,EAC/C,CACF,CAAC;MACH;MACA,OAAO,CAAC;IACV;EACF,CAAC;EACDC,OAAO,EAAE;IACP,GAAGf,UAAU,CAAC,CAAC,WAAW,EAAE,WAAW,EAAE,YAAY,CAAC,CAAC;IAAE;;IAEzD,MAAMgB,gBAAgBA,CAACL,IAAI,EAAE;MAC3B,IAAI;QACF,MAAM,IAAI,CAACM,SAAS,CAAC;UAAEC,MAAM,EAAEP,IAAI,CAACO,MAAM;UAAEN,QAAQ,EAAE;QAAE,CAAC,CAAC;QAC1D,MAAM,IAAI,CAACO,SAAS,CAAC,CAAC,EAAE;MAC1B,EAAE,OAAOC,KAAK,EAAE;QACdC,OAAO,CAACD,KAAK,CAAC,wBAAwB,EAAEA,KAAK,CAAC;MAChD;IACF,CAAC;IAED,MAAME,gBAAgBA,CAACX,IAAI,EAAE;MAC3B,IAAIA,IAAI,CAACC,QAAO,GAAI,CAAC,EAAE;QACrB,IAAI;UACF,MAAM,IAAI,CAACK,SAAS,CAAC;YAAEC,MAAM,EAAEP,IAAI,CAACO,MAAM;YAAEN,QAAQ,EAAE,CAAC;UAAE,CAAC,CAAC;UAC3D,MAAM,IAAI,CAACO,SAAS,CAAC,CAAC,EAAE;QAC1B,EAAE,OAAOC,KAAK,EAAE;UACdC,OAAO,CAACD,KAAK,CAAC,wBAAwB,EAAEA,KAAK,CAAC;QAChD;MACF;IACF,CAAC;IAED,MAAMG,gBAAgBA,CAACL,MAAM,EAAE;MAC7B,IAAI;QACF;QACA,MAAM,IAAI,CAACM,MAAM,CAACC,QAAQ,CAAC,YAAY,EAAEP,MAAM,CAAC;MAClD,EAAE,OAAOE,KAAK,EAAE;QACdC,OAAO,CAACD,KAAK,CAAC,iBAAiB,EAAEA,KAAK,CAAC;MACzC;IACF,CAAC;IAEDM,QAAQA,CAAA,EAAG;MACT,IAAI,CAACC,OAAO,CAACC,IAAI,CAAC;QAAE1B,IAAI,EAAE;MAAW,CAAC,CAAC;IACzC;EACF,CAAC;EACD,MAAM2B,OAAOA,CAAA,EAAG;IACd,IAAI;MACF,MAAM,IAAI,CAACV,SAAS,CAAC,CAAC,EAAE;IAC1B,UAAU;MACR,IAAI,CAACf,SAAQ,GAAI,KAAK,EAAE;IAC1B;EACF;AACF,CAAC","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}