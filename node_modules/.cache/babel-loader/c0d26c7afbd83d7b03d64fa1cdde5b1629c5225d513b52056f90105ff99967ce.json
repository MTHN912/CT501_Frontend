{"ast":null,"code":"import { createElementVNode as _createElementVNode, renderList as _renderList, Fragment as _Fragment, openBlock as _openBlock, createElementBlock as _createElementBlock, createCommentVNode as _createCommentVNode, toDisplayString as _toDisplayString, pushScopeId as _pushScopeId, popScopeId as _popScopeId } from \"vue\";\nconst _withScopeId = n => (_pushScopeId(\"data-v-47bf2df0\"), n = n(), _popScopeId(), n);\nconst _hoisted_1 = {\n  class: \"cart-container\"\n};\nconst _hoisted_2 = /*#__PURE__*/_withScopeId(() => /*#__PURE__*/_createElementVNode(\"h2\", null, \"Thực Đơn của Bạn\", -1 /* HOISTED */));\nconst _hoisted_3 = {\n  key: 0,\n  class: \"cart-details\"\n};\nconst _hoisted_4 = {\n  class: \"cart-item-list\"\n};\nconst _hoisted_5 = {\n  class: \"cart-item-info\"\n};\nconst _hoisted_6 = [\"onClick\"];\nconst _hoisted_7 = {\n  class: \"cart-summary\"\n};\nconst _hoisted_8 = /*#__PURE__*/_withScopeId(() => /*#__PURE__*/_createElementVNode(\"h3\", null, \"Tổng cộng\", -1 /* HOISTED */));\nconst _hoisted_9 = {\n  key: 1\n};\nconst _hoisted_10 = /*#__PURE__*/_withScopeId(() => /*#__PURE__*/_createElementVNode(\"p\", null, \"Thực đơn của bạn đang trống.\", -1 /* HOISTED */));\nconst _hoisted_11 = [_hoisted_10];\nexport function render(_ctx, _cache, $props, $setup, $data, $options) {\n  return _openBlock(), _createElementBlock(\"div\", _hoisted_1, [_hoisted_2, $data.cart.items.length > 0 ? (_openBlock(), _createElementBlock(\"div\", _hoisted_3, [_createElementVNode(\"ul\", _hoisted_4, [(_openBlock(true), _createElementBlock(_Fragment, null, _renderList($data.cart.items, (item, index) => {\n    return _openBlock(), _createElementBlock(\"li\", {\n      key: index,\n      class: \"cart-item\"\n    }, [_createElementVNode(\"div\", _hoisted_5, [_createCommentVNode(\" Đây là phần cập nhật để lấy thông tin món ăn \"), _createElementVNode(\"h3\", null, _toDisplayString(item.dish.name), 1 /* TEXT */), _createElementVNode(\"p\", null, \"Số lượng: \" + _toDisplayString(item.quantity), 1 /* TEXT */), _createElementVNode(\"p\", null, \"Đơn giá: \" + _toDisplayString(item.dish.price) + \" đ\", 1 /* TEXT */), _createElementVNode(\"p\", null, \"Tổng giá: \" + _toDisplayString($options.itemTotalPrice(item)) + \" đ\", 1 /* TEXT */), _createElementVNode(\"button\", {\n      onClick: $event => $options.removeItem(item.dishId)\n    }, \"Bỏ món\", 8 /* PROPS */, _hoisted_6)])]);\n  }), 128 /* KEYED_FRAGMENT */))]), _createElementVNode(\"div\", _hoisted_7, [_hoisted_8, _createElementVNode(\"p\", null, \"Tổng số món: \" + _toDisplayString($options.totalQuantity), 1 /* TEXT */), _createElementVNode(\"p\", null, \"Tổng giá tất cả: \" + _toDisplayString($options.totalPrice) + \" đ\", 1 /* TEXT */)]), _createElementVNode(\"button\", {\n    onClick: _cache[0] || (_cache[0] = (...args) => $options.checkout && $options.checkout(...args)),\n    class: \"checkout-button\"\n  }, \"Đặt Bàn\")])) : (_openBlock(), _createElementBlock(\"div\", _hoisted_9, [..._hoisted_11]))]);\n}","map":{"version":3,"names":["class","_createElementVNode","key","_hoisted_10","_createElementBlock","_hoisted_1","_hoisted_2","$data","cart","items","length","_hoisted_3","_hoisted_4","_Fragment","_renderList","item","index","_hoisted_5","_createCommentVNode","_toDisplayString","dish","name","quantity","price","$options","itemTotalPrice","onClick","$event","removeItem","dishId","_hoisted_6","_hoisted_7","_hoisted_8","totalQuantity","totalPrice","_cache","args","checkout","_hoisted_9","_hoisted_11"],"sources":["D:\\Tiểu Luận Tốt Nghiệp\\Frontend\\src\\components\\Menu\\Cart.vue"],"sourcesContent":["<template>\n  <div class=\"cart-container\">\n    <h2>Thực Đơn của Bạn</h2>\n\n    <div v-if=\"cart.items.length > 0\" class=\"cart-details\">\n      <ul class=\"cart-item-list\">\n        <li v-for=\"(item, index) in cart.items\" :key=\"index\" class=\"cart-item\">\n          <div class=\"cart-item-info\">\n            <!-- Đây là phần cập nhật để lấy thông tin món ăn -->\n            <h3>{{ item.dish.name }}</h3>\n            <p>Số lượng: {{ item.quantity }}</p>\n            <p>Đơn giá: {{ item.dish.price }} đ</p>\n            <p>Tổng giá: {{ itemTotalPrice(item) }} đ</p>\n            <button @click=\"removeItem(item.dishId)\">Bỏ món</button>\n          </div>\n        </li>\n      </ul>\n\n      <div class=\"cart-summary\">\n        <h3>Tổng cộng</h3>\n        <p>Tổng số món: {{ totalQuantity }}</p>\n        <p>Tổng giá tất cả: {{ totalPrice }} đ</p>\n      </div>\n\n      <button @click=\"checkout\" class=\"checkout-button\">Đặt Bàn</button>\n    </div>\n\n    <div v-else>\n      <p>Thực đơn của bạn đang trống.</p>\n    </div>\n  </div>\n</template>\n\n<script>\nimport axios from \"axios\";\n\nexport default {\n  name: \"CartDetail\",\n  data() {\n    return {\n      cart: { items: [] }, // Dữ liệu giỏ hàng\n    };\n  },\n  computed: {\n    // Tổng số lượng các món\n    totalQuantity() {\n      return this.cart.items.reduce((total, item) => total + item.quantity, 0);\n    },\n    // Tổng giá tiền của toàn bộ giỏ hàng\n    totalPrice() {\n      return this.cart.items.reduce(\n        (total, item) => total + itemTotalPrice(item),\n        0\n      );\n    },\n  },\n  methods: {\n    // Tính tổng giá của một món\n    itemTotalPrice(item) {\n      return item.quantity * item.dish.price;\n    },\n\n    // Xóa món khỏi giỏ hàng\n    async removeItem(dishId) {\n      try {\n        const response = await axios.post(\n          \"http://localhost:3000/cart/removeCart\",\n          {\n            dishId: dishId,\n          }\n        );\n        this.cart = response.data.cart;\n      } catch (error) {\n        console.error(\"Lỗi khi bỏ món:\", error);\n      }\n    },\n\n    // Lấy dữ liệu giỏ hàng từ server\n    async fetchCart() {\n      try {\n        const response = await axios.get(\"http://localhost:3000/cart/getCart\");\n        this.cart = response.data;\n      } catch (error) {\n        console.error(\"Lỗi khi tải giỏ hàng:\", error);\n      }\n    },\n\n    // Xử lý đặt bàn\n    checkout() {\n      this.$router.push({ name: \"Checkout\" });\n    },\n  },\n  mounted() {\n    this.fetchCart();\n  },\n};\n</script>\n\n<style scoped>\n.cart-container {\n  padding: 20px;\n  max-width: 800px;\n  margin: 0 auto;\n}\n\n.cart-item-list {\n  list-style: none;\n  padding: 0;\n}\n\n.cart-item {\n  border-bottom: 1px solid #ddd;\n  padding: 10px 0;\n}\n\n.cart-item-info {\n  display: flex;\n  justify-content: space-between;\n  align-items: center;\n}\n\n.cart-summary {\n  margin-top: 20px;\n  border-top: 1px solid #ddd;\n  padding-top: 10px;\n}\n\n.checkout-button {\n  background-color: #28a745;\n  color: white;\n  border: none;\n  padding: 10px 20px;\n  cursor: pointer;\n  font-size: 16px;\n}\n\n.checkout-button:hover {\n  background-color: #218838;\n}\n</style>\n"],"mappings":";;;EACOA,KAAK,EAAC;AAAgB;gEACzBC,mBAAA,CAAyB,YAArB,kBAAgB;;EAFxBC,GAAA;EAIsCF,KAAK,EAAC;;;EAClCA,KAAK,EAAC;AAAgB;;EAEjBA,KAAK,EAAC;AAAgB;mBAPrC;;EAkBWA,KAAK,EAAC;AAAc;gEACvBC,mBAAA,CAAkB,YAAd,WAAS;;EAnBrBC,GAAA;AAAA;iEA4BMD,mBAAA,CAAmC,WAAhC,8BAA4B;qBAA/BE,WAAmC,C;;uBA3BvCC,mBAAA,CA6BM,OA7BNC,UA6BM,GA5BJC,UAAyB,EAEdC,KAAA,CAAAC,IAAI,CAACC,KAAK,CAACC,MAAM,Q,cAA5BN,mBAAA,CAqBM,OArBNO,UAqBM,GApBJV,mBAAA,CAWK,MAXLW,UAWK,I,kBAVHR,mBAAA,CASKS,SAAA,QAfbC,WAAA,CAMoCP,KAAA,CAAAC,IAAI,CAACC,KAAK,EAN9C,CAMoBM,IAAI,EAAEC,KAAK;yBAAvBZ,mBAAA,CASK;MAToCF,GAAG,EAAEc,KAAK;MAAEhB,KAAK,EAAC;QACzDC,mBAAA,CAOM,OAPNgB,UAOM,GANJC,mBAAA,kDAAqD,EACrDjB,mBAAA,CAA6B,YAAAkB,gBAAA,CAAtBJ,IAAI,CAACK,IAAI,CAACC,IAAI,kBACrBpB,mBAAA,CAAoC,WAAjC,YAAU,GAAAkB,gBAAA,CAAGJ,IAAI,CAACO,QAAQ,kBAC7BrB,mBAAA,CAAuC,WAApC,WAAS,GAAAkB,gBAAA,CAAGJ,IAAI,CAACK,IAAI,CAACG,KAAK,IAAG,IAAE,iBACnCtB,mBAAA,CAA6C,WAA1C,YAAU,GAAAkB,gBAAA,CAAGK,QAAA,CAAAC,cAAc,CAACV,IAAI,KAAI,IAAE,iBACzCd,mBAAA,CAAwD;MAA/CyB,OAAK,EAAAC,MAAA,IAAEH,QAAA,CAAAI,UAAU,CAACb,IAAI,CAACc,MAAM;OAAG,QAAM,iBAb3DC,UAAA,E;oCAkBM7B,mBAAA,CAIM,OAJN8B,UAIM,GAHJC,UAAkB,EAClB/B,mBAAA,CAAuC,WAApC,eAAa,GAAAkB,gBAAA,CAAGK,QAAA,CAAAS,aAAa,kBAChChC,mBAAA,CAA0C,WAAvC,mBAAiB,GAAAkB,gBAAA,CAAGK,QAAA,CAAAU,UAAU,IAAG,IAAE,gB,GAGxCjC,mBAAA,CAAkE;IAAzDyB,OAAK,EAAAS,MAAA,QAAAA,MAAA,UAAAC,IAAA,KAAEZ,QAAA,CAAAa,QAAA,IAAAb,QAAA,CAAAa,QAAA,IAAAD,IAAA,CAAQ;IAAEpC,KAAK,EAAC;KAAkB,SAAO,E,oBAG3DI,mBAAA,CAEM,OA7BVkC,UAAA,MAAAC,WAAA,I","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}